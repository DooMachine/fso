{"remainingRequest":"/home/seph/fso/src/fso.webclient/fso.webclient/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/seph/fso/src/fso.webclient/fso.webclient/node_modules/@ngrx/entity/@ngrx/entity.es5.js","dependencies":[{"path":"/home/seph/fso/src/fso.webclient/fso.webclient/node_modules/@ngrx/entity/@ngrx/entity.es5.js","mtime":1510095324000},{"path":"/home/seph/fso/src/fso.webclient/fso.webclient/node_modules/cache-loader/dist/cjs.js","mtime":1520857163677},{"path":"/home/seph/fso/src/fso.webclient/fso.webclient/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { createSelector } from '@ngrx/store';\n/**\n * @template V\n * @return {?}\n */\nfunction getInitialEntityState() {\n    return {\n        ids: [],\n        entities: {},\n    };\n}\n/**\n * @template V\n * @return {?}\n */\nfunction createInitialStateFactory() {\n    /**\n     * @param {?=} additionalState\n     * @return {?}\n     */\n    function getInitialState(additionalState) {\n        if (additionalState === void 0) { additionalState = {}; }\n        return Object.assign(getInitialEntityState(), additionalState);\n    }\n    return { getInitialState: getInitialState };\n}\n/**\n * @template T\n * @return {?}\n */\nfunction createSelectorsFactory() {\n    /**\n     * @param {?=} selectState\n     * @return {?}\n     */\n    function getSelectors(selectState) {\n        var /** @type {?} */ selectIds = function (state) { return state.ids; };\n        var /** @type {?} */ selectEntities = function (state) { return state.entities; };\n        var /** @type {?} */ selectAll = createSelector(selectIds, selectEntities, function (ids, entities) { return ids.map(function (id) { return ((entities))[id]; }); });\n        var /** @type {?} */ selectTotal = createSelector(selectIds, function (ids) { return ids.length; });\n        if (!selectState) {\n            return {\n                selectIds: selectIds,\n                selectEntities: selectEntities,\n                selectAll: selectAll,\n                selectTotal: selectTotal,\n            };\n        }\n        return {\n            selectIds: createSelector(selectState, selectIds),\n            selectEntities: createSelector(selectState, selectEntities),\n            selectAll: createSelector(selectState, selectAll),\n            selectTotal: createSelector(selectState, selectTotal),\n        };\n    }\n    return { getSelectors: getSelectors };\n}\n/**\n * @template V, R\n * @param {?} mutator\n * @return {?}\n */\nfunction createStateOperator(mutator) {\n    return function operation(arg, state) {\n        var /** @type {?} */ clonedEntityState = {\n            ids: state.ids.slice(),\n            entities: Object.assign({}, state.entities),\n        };\n        var /** @type {?} */ didMutate = mutator(arg, clonedEntityState);\n        if (didMutate) {\n            return Object.assign({}, state, clonedEntityState);\n        }\n        return state;\n    };\n}\n/**\n * @template T\n * @param {?} selectId\n * @return {?}\n */\nfunction createUnsortedStateAdapter(selectId) {\n    /**\n     * @param {?} entity\n     * @param {?} state\n     * @return {?}\n     */\n    function addOneMutably(entity, state) {\n        var /** @type {?} */ key = selectId(entity);\n        if (key in state.entities) {\n            return false;\n        }\n        state.ids.push(key);\n        state.entities[key] = entity;\n        return true;\n    }\n    /**\n     * @param {?} entities\n     * @param {?} state\n     * @return {?}\n     */\n    function addManyMutably(entities, state) {\n        var /** @type {?} */ didMutate = false;\n        for (var /** @type {?} */ index in entities) {\n            didMutate = addOneMutably(entities[index], state) || didMutate;\n        }\n        return didMutate;\n    }\n    /**\n     * @param {?} entities\n     * @param {?} state\n     * @return {?}\n     */\n    function addAllMutably(entities, state) {\n        state.ids = [];\n        state.entities = {};\n        addManyMutably(entities, state);\n        return true;\n    }\n    /**\n     * @param {?} key\n     * @param {?} state\n     * @return {?}\n     */\n    function removeOneMutably(key, state) {\n        return removeManyMutably([key], state);\n    }\n    /**\n     * @param {?} keys\n     * @param {?} state\n     * @return {?}\n     */\n    function removeManyMutably(keys, state) {\n        var /** @type {?} */ didMutate = keys\n            .filter(function (key) { return key in state.entities; })\n            .map(function (key) { return delete state.entities[key]; }).length > 0;\n        if (didMutate) {\n            state.ids = state.ids.filter(function (id) { return id in state.entities; });\n        }\n        return didMutate;\n    }\n    /**\n     * @template S\n     * @param {?} state\n     * @return {?}\n     */\n    function removeAll(state) {\n        return Object.assign({}, state, {\n            ids: [],\n            entities: {},\n        });\n    }\n    /**\n     * @param {?} keys\n     * @param {?} update\n     * @param {?} state\n     * @return {?}\n     */\n    function takeNewKey(keys, update, state) {\n        var /** @type {?} */ original = state.entities[update.id];\n        var /** @type {?} */ updated = Object.assign({}, original, update.changes);\n        var /** @type {?} */ newKey = selectId(updated);\n        if (newKey !== update.id) {\n            keys[update.id] = newKey;\n            delete state.entities[update.id];\n        }\n        state.entities[newKey] = updated;\n    }\n    /**\n     * @param {?} update\n     * @param {?} state\n     * @return {?}\n     */\n    function updateOneMutably(update, state) {\n        return updateManyMutably([update], state);\n    }\n    /**\n     * @param {?} updates\n     * @param {?} state\n     * @return {?}\n     */\n    function updateManyMutably(updates, state) {\n        var /** @type {?} */ newKeys = {};\n        var /** @type {?} */ didMutate = updates\n            .filter(function (update) { return update.id in state.entities; })\n            .map(function (update) { return takeNewKey(newKeys, update, state); }).length > 0;\n        if (didMutate) {\n            state.ids = state.ids.map(function (id) { return newKeys[id] || id; });\n        }\n        return didMutate;\n    }\n    return {\n        removeAll: removeAll,\n        addOne: createStateOperator(addOneMutably),\n        addMany: createStateOperator(addManyMutably),\n        addAll: createStateOperator(addAllMutably),\n        updateOne: createStateOperator(updateOneMutably),\n        updateMany: createStateOperator(updateManyMutably),\n        removeOne: createStateOperator(removeOneMutably),\n        removeMany: createStateOperator(removeManyMutably),\n    };\n}\n/**\n * @template T\n * @param {?} selectId\n * @param {?} sort\n * @return {?}\n */\nfunction createSortedStateAdapter(selectId, sort) {\n    var _a = createUnsortedStateAdapter(selectId), removeOne = _a.removeOne, removeMany = _a.removeMany, removeAll = _a.removeAll;\n    /**\n     * @param {?} entity\n     * @param {?} state\n     * @return {?}\n     */\n    function addOneMutably(entity, state) {\n        return addManyMutably([entity], state);\n    }\n    /**\n     * @param {?} newModels\n     * @param {?} state\n     * @return {?}\n     */\n    function addManyMutably(newModels, state) {\n        var /** @type {?} */ models = newModels.filter(function (model) { return !(selectId(model) in state.entities); });\n        return merge(models, state);\n    }\n    /**\n     * @param {?} models\n     * @param {?} state\n     * @return {?}\n     */\n    function addAllMutably(models, state) {\n        state.entities = {};\n        state.ids = [];\n        addManyMutably(models, state);\n        return true;\n    }\n    /**\n     * @param {?} update\n     * @param {?} state\n     * @return {?}\n     */\n    function updateOneMutably(update, state) {\n        return updateManyMutably([update], state);\n    }\n    /**\n     * @param {?} models\n     * @param {?} update\n     * @param {?} state\n     * @return {?}\n     */\n    function takeUpdatedModel(models, update, state) {\n        if (!(update.id in state.entities)) {\n            return;\n        }\n        var /** @type {?} */ original = state.entities[update.id];\n        var /** @type {?} */ updated = Object.assign({}, original, update.changes);\n        delete state.entities[update.id];\n        models.push(updated);\n    }\n    /**\n     * @param {?} updates\n     * @param {?} state\n     * @return {?}\n     */\n    function updateManyMutably(updates, state) {\n        var /** @type {?} */ models = [];\n        updates.forEach(function (update) { return takeUpdatedModel(models, update, state); });\n        if (models.length) {\n            state.ids = state.ids.filter(function (id) { return id in state.entities; });\n        }\n        return merge(models, state);\n    }\n    /**\n     * @param {?} models\n     * @param {?} state\n     * @return {?}\n     */\n    function merge(models, state) {\n        if (models.length === 0) {\n            return false;\n        }\n        models.sort(sort);\n        var /** @type {?} */ ids = [];\n        var /** @type {?} */ i = 0;\n        var /** @type {?} */ j = 0;\n        while (i < models.length && j < state.ids.length) {\n            var /** @type {?} */ model = models[i];\n            var /** @type {?} */ modelId = selectId(model);\n            var /** @type {?} */ entityId = state.ids[j];\n            var /** @type {?} */ entity = state.entities[entityId];\n            if (sort(model, entity) <= 0) {\n                ids.push(modelId);\n                i++;\n            }\n            else {\n                ids.push(entityId);\n                j++;\n            }\n        }\n        if (i < models.length) {\n            state.ids = ids.concat(models.slice(i).map(selectId));\n        }\n        else {\n            state.ids = ids.concat(state.ids.slice(j));\n        }\n        models.forEach(function (model, i) {\n            state.entities[selectId(model)] = model;\n        });\n        return true;\n    }\n    return {\n        removeOne: removeOne,\n        removeMany: removeMany,\n        removeAll: removeAll,\n        addOne: createStateOperator(addOneMutably),\n        updateOne: createStateOperator(updateOneMutably),\n        addAll: createStateOperator(addAllMutably),\n        addMany: createStateOperator(addManyMutably),\n        updateMany: createStateOperator(updateManyMutably),\n    };\n}\n/**\n * @template T\n * @param {?=} options\n * @return {?}\n */\nfunction createEntityAdapter(options) {\n    if (options === void 0) { options = {}; }\n    var _a = Object.assign({ sortComparer: false, selectId: function (instance) { return instance.id; } }, options), selectId = _a.selectId, sortComparer = _a.sortComparer;\n    var /** @type {?} */ stateFactory = createInitialStateFactory();\n    var /** @type {?} */ selectorsFactory = createSelectorsFactory();\n    var /** @type {?} */ stateAdapter = sortComparer\n        ? createSortedStateAdapter(selectId, sortComparer)\n        : createUnsortedStateAdapter(selectId);\n    return Object.assign({}, stateFactory, selectorsFactory, stateAdapter);\n}\n/**\n * Generated bundle index. Do not edit.\n */\nexport { createEntityAdapter };\n//# sourceMappingURL=entity.es5.js.map\n",null]}