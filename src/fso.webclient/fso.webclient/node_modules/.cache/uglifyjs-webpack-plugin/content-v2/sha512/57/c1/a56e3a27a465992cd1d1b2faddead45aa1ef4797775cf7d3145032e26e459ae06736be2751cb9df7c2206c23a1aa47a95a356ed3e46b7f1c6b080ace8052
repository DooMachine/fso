{"code":"webpackJsonp([1],{NUBw:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o,r=n(\"WT6e\"),i=function(){},a=n(\"Xjw4\"),s=n(\"dyjq\");!function(e){e.GET_TRENDING_POSTS=\"[Trending Post] GET_TRENDING_POSTS\",e.GET_TRENDING_POSTS_SUCCESS=\"[Trending Post] GET_TRENDING_POSTS_SUCCESS\",e.GET_TRENDING_POSTS_FAIL=\"[Trending Post] GET_TRENDING_POSTS_FAIL\",e.LIKE_POST=\"[Trending Post] LIKE_POST\",e.LIKE_POST_SUCCESS=\"[Trending Post] LIKE_POST_SUCCESS\",e.LIKE_POST_FAIL=\"[Trending Post] LIKE_POST_FAIL\",e.UNLIKE_POST=\"[Trending Post] UNLIKE_POST\",e.UNLIKE_POST_SUCCESS=\"[Trending Post] UNLIKE_POST_SUCCESS\",e.UNLIKE_POST_FAIL=\"[Trending Post] UNLIKE_POST_FAIL\",e.FOLLOW_USER=\"[Trending Post] FOLLOW_USER\",e.FOLLOW_USER_SUCCESS=\"[Trending Post] FOLLOW_USER_SUCCESS\",e.FOLLOW_USER_FAIL=\"[Trending Post] FOLLOW_USER_FAIL\",e.UNFOLLOW_USER=\"[Trending Post] UNFOLLOW_USER\",e.UNFOLLOW_USER_SUCCESS=\"[Trending Post] UNFOLLOW_USER_SUCCESS\",e.UNFOLLOW_USER_FAIL=\"[Trending Post] UNFOLLOW_USER_FAIL\"}(o||(o={}));var d,l=function(){return function(e){this.payload=e,this.type=o.GET_TRENDING_POSTS}}(),u=function(){return function(e){this.payload=e,this.type=o.GET_TRENDING_POSTS_SUCCESS}}(),c=function(){return function(e){this.payload=e,this.type=o.GET_TRENDING_POSTS_FAIL}}(),S=function(){return function(e){this.payload=e,this.type=o.LIKE_POST_SUCCESS}}(),p=function(){return function(e){this.payload=e,this.type=o.LIKE_POST_FAIL}}(),O=function(){return function(e){this.payload=e,this.type=o.UNLIKE_POST_SUCCESS}}(),E=function(){return function(e){this.payload=e,this.type=o.UNLIKE_POST_FAIL}}(),T=function(){return function(e){this.payload=e,this.type=o.FOLLOW_USER_SUCCESS}}(),L=function(){return function(e){this.payload=e,this.type=o.FOLLOW_USER_FAIL}}(),_=function(){return function(e){this.payload=e,this.type=o.UNFOLLOW_USER_SUCCESS}}(),h=function(){return function(e){this.payload=e,this.type=o.UNFOLLOW_USER_FAIL}}();!function(e){e.GET_INTERESTS=\"[TrendingInterest] GET_INTERESTS\",e.GET_INTERESTS_SUCCESS=\"[TrendingInterest] GET_INTERESTS_SUCCESS\",e.GET_INTERESTS_FAIL=\"[TrendingInterest] GET_INTERESTS_FAIL\",e.FOLLOW_INTERESTS=\"[TrendingInterest] FOLLOW_INTERESTS\",e.FOLLOW_INTERESTS_SUCCESS=\"[TrendingInterest] FOLLOW_INTERESTS_SUCCESS\",e.FOLLOW_INTERESTS_FAIL=\"[TrendingInterest] FOLLOW_INTERESTS_FAIL\",e.UNFOLLOW_INTERESTS=\"[TrendingInterest] UNFOLLOW_INTERESTS\",e.UNFOLLOW_INTERESTS_SUCCESS=\"[TrendingInterest] UNFOLLOW_INTERESTS_SUCCESS\",e.UNFOLLOW_INTERESTS_FAIL=\"[TrendingInterest] UNFOLLOW_INTERESTS_FAIL\"}(d||(d={}));var I=function(){return function(e){this.payload=e,this.type=d.GET_INTERESTS}}(),f=function(){return function(e){this.payload=e,this.type=d.GET_INTERESTS_SUCCESS}}(),g=function(){return function(e){this.payload=e,this.type=d.GET_INTERESTS_FAIL}}(),y=function(){return function(e){this.payload=e,this.type=d.FOLLOW_INTERESTS_SUCCESS}}(),U=function(){return function(e){this.payload=e,this.type=d.FOLLOW_INTERESTS_FAIL}}(),N=function(){return function(e){this.payload=e,this.type=d.UNFOLLOW_INTERESTS_SUCCESS}}(),F=function(){return function(e){this.payload=e,this.type=d.UNFOLLOW_INTERESTS_FAIL}}(),C=n(\"IXnz\"),b=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v=Object(C.a)({selectId:function(e){return e.id},sortComparer:!1}),w=v.getInitialState({listModalOpen:!1,pageSize:12,pageIndex:0,totalPage:0,totalCount:0,isLoading:!1,error:\"\",showError:!1,hasNextPage:!0,order:\"followerCount\"});function P(e,t){switch(void 0===e&&(e=w),t.type){case d.GET_INTERESTS:return b({},e,{isLoading:!0,pageIndex:e.pageIndex+1});case d.GET_INTERESTS_SUCCESS:return b({},v.addAll(t.payload.entities,e),{isLoading:!1,totalPage:t.payload.totalPage,totalCount:t.payload.totalCount,hasNextPage:t.payload.hasNextPage});case d.GET_INTERESTS_FAIL:return b({},e,{isLoading:!1,showError:!0,error:t.payload.error});case d.FOLLOW_INTERESTS:return v.updateOne({id:t.payload.id,changes:{isCurrentUserFollowing:!0}},e);case d.FOLLOW_INTERESTS_SUCCESS:case d.FOLLOW_INTERESTS_FAIL:return v.updateOne({id:t.payload.id,changes:{isCurrentUserFollowing:0===t.payload.followState}},e);case d.UNFOLLOW_INTERESTS:return v.updateOne({id:t.payload.id,changes:{isCurrentUserFollowing:!1}},e);case d.UNFOLLOW_INTERESTS_SUCCESS:case d.UNFOLLOW_INTERESTS_FAIL:return v.updateOne({id:t.payload.id,changes:{isCurrentUserFollowing:0===t.payload.followState}},e);default:return e}}var R,G=Object(s.E)(\"trending\"),j=Object(s.G)(G,function(e){return e.interests}),W=Object(s.G)(j,function(e){return e.isLoading}),m=(R=v.getSelectors(j)).selectAll,A=R.selectTotal,k=(Object(s.G)(A,W,function(e,t){return!t&&0===e}),this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}),$=Object(C.a)({selectId:function(e){return e.id},sortComparer:!1}),K=$.getInitialState({pageSize:12,pageIndex:1,totalPageCount:0,totalCount:0,isLoading:!1,error:\"An error occured...\",showError:!1,hasNextPage:!0,order:\"publishDate\"});function x(e,t){switch(void 0===e&&(e=K),t.type){case o.GET_TRENDING_POSTS:return k({},e,{isLoading:!0,pageIndex:e.pageIndex});case o.GET_TRENDING_POSTS_SUCCESS:return null==t.payload?k({},e,{hasNextPage:!1}):k({},$.addMany(t.payload.entities,e),{totalPageCount:t.payload.totalPageCount,totalCount:t.payload.totalCount,hasNextPage:t.payload.hasNextPage,isLoading:!1});case o.GET_TRENDING_POSTS_FAIL:return k({},e,{isLoading:!1,showError:!0,pageIndex:e.pageIndex});case o.LIKE_POST:return $.updateOne({id:t.payload.id,changes:{isCurrentUserLiked:!0}},e);case o.LIKE_POST_SUCCESS:return $.updateOne({id:t.payload.id,changes:{isCurrentUserLiked:t.payload.isLiked}},e);case o.LIKE_POST_FAIL:case o.UNLIKE_POST:return $.updateOne({id:t.payload.id,changes:{isCurrentUserLiked:!1}},e);case o.UNLIKE_POST_SUCCESS:return $.updateOne({id:t.payload.id,changes:{isCurrentUserLiked:t.payload.isLiked}},e);case o.UNLIKE_POST_FAIL:return $.updateOne({id:t.payload.id,changes:{isCurrentUserLiked:!0}},e);case o.FOLLOW_USER:var n=e.entities[t.payload.postId],r=Object.assign({},n,{authorInfo:k({},n.authorInfo,{followState:1})});return $.updateOne({id:t.payload.postId,changes:r},e);case o.FOLLOW_USER_SUCCESS:return n=e.entities[t.payload.postId],r=Object.assign({},n,{authorInfo:k({},n.authorInfo,{followState:t.payload.lastFollowState})}),$.updateOne({id:t.payload.postId,changes:r},e);case o.FOLLOW_USER_FAIL:case o.UNFOLLOW_USER:return n=e.entities[t.payload.postId],r=Object.assign({},n,{authorInfo:k({},n.authorInfo,{followState:2})}),$.updateOne({id:t.payload.postId,changes:r},e);case o.UNFOLLOW_USER_SUCCESS:return n=e.entities[t.payload.postId],r=Object.assign({},n,{authorInfo:k({},n.authorInfo,{followState:t.payload.lastFollowState})}),$.updateOne({id:t.payload.postId,changes:r},e);case o.UNFOLLOW_USER_FAIL:return n=e.entities[t.payload.postId],r=Object.assign({},n,{authorInfo:k({},n.authorInfo,{followState:1})}),$.updateOne({id:t.payload.postId,changes:r},e);default:return e}}var D,M=Object(s.E)(\"trending\"),z=Object(s.G)(M,function(e){return e.posts}),q=Object(s.G)(z,function(e){return e.isLoading}),H=(D=$.getSelectors(z)).selectAll,J=D.selectTotal,B=(Object(s.G)(J,q,function(e,t){return!t&&0===e}),function(){function e(e){this.store=e,this.interests$=this.store.select(m),this.posts$=this.store.select(H)}return e.prototype.ngOnInit=function(){this.store.dispatch(new l),this.store.dispatch(new I)},e}()),X=r[\"\\u0275crt\"]({encapsulation:0,styles:[[\"*[_ngcontent-%COMP%]{padding:2px}\"]],data:{}});function Q(e){return r[\"\\u0275vid\"](2,[(e()(),r[\"\\u0275eld\"](0,0,null,null,3,\"pre\",[],null,null,null,null,null)),(e()(),r[\"\\u0275ted\"](1,null,[\"    \",\"\\n\"])),r[\"\\u0275pid\"](131072,a.AsyncPipe,[r.ChangeDetectorRef]),r[\"\\u0275pid\"](0,a.JsonPipe,[])],null,function(e,t){var n=t.component;e(t,1,0,r[\"\\u0275unv\"](t,1,0,r[\"\\u0275nov\"](t,3).transform(r[\"\\u0275unv\"](t,1,0,r[\"\\u0275nov\"](t,2).transform(n.interests$)))))})}var Y=r[\"\\u0275ccf\"](\"app-trending\",B,function(e){return r[\"\\u0275vid\"](0,[(e()(),r[\"\\u0275eld\"](0,0,null,null,1,\"app-trending\",[],null,null,null,Q,X)),r[\"\\u0275did\"](1,114688,null,0,B,[s.o],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Z=(n(\"owTz\"),n(\"ItHS\")),V=n(\"kZql\"),ee=function(){return function(e){var t=this;this._http=e,this.GetTredingInterests=function(e,n,o,r){return void 0===e&&(e=\"WW\"),t._http.get(t.actionUrl+\"GetTrendingInterests?langCode=\"+e+\"&pageIndex=\"+n+\"&pageSize=\"+o+\"&order=\"+r,{headers:t.headers})},this.FollowInterest=function(e){return t._http.post(t.followActionUrl+\"Join\",JSON.stringify({groupId:e}),{headers:t.headers})},this.UnfollowInterest=function(e){return t._http.post(t.followActionUrl+\"Leave\",JSON.stringify({groupId:e}),{headers:t.headers})},this.actionUrl=V.a.serviceUrls.Base+\"api/Trending/\",this.followActionUrl=V.a.serviceUrls.Base+\"api/Group/\",this.headers=new Z.HttpHeaders,this.headers=this.headers.set(\"Content-Type\",\"application/json\"),this.headers=this.headers.set(\"Accept\",\"application/json\")}}(),te=n(\"TToO\"),ne=n(\"YaPU\"),oe=n(\"8AXl\"),re=function(){function e(e,t,n){var o=this;this.actions$=e,this.store=t,this.trendingService=n,this.onGetUserInterestsRequest$=this.actions$.ofType(d.GET_INTERESTS).withLatestFrom(this.store.select(function(e){return e})).mergeMap(function(e){var t=e[1];return o.trendingService.GetTredingInterests(t.trending.interests.langCode,t.trending.interests.pageIndex,t.trending.interests.pageSize,t.trending.interests.order).map(function(e){return new f(e.value)}).catch(function(e){return ne.Observable.of(new g({showError:!0}))})}),this.onUserFollowInterest$=this.actions$.ofType(d.FOLLOW_INTERESTS).mergeMap(function(e){return o.trendingService.FollowInterest(e.payload.id).map(function(t){return t.value.isActionSucceed?new y({id:e.payload.id,followState:t.value.lastFollowState}):new U({id:e.payload.id,followState:t.value.lastFollowState})}).catch(function(t){return ne.Observable.of(new U({id:e.payload.id,followState:1}))})}),this.onUserUnfollowInterest$=this.actions$.ofType(d.UNFOLLOW_INTERESTS).mergeMap(function(e){return o.trendingService.UnfollowInterest(e.payload.id).map(function(t){return t.value.isActionSucceed?new N({id:e.payload.id,followState:t.value.lastFollowState}):new F({id:e.payload.id,followState:t.value.lastFollowState})}).catch(function(t){return ne.Observable.of(new F({id:e.payload.id,followState:0}))})})}return Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onGetUserInterestsRequest$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onUserFollowInterest$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onUserUnfollowInterest$\",void 0),e}(),ie=(n(\"TDKa\"),this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}),ae=function(){function e(e,t,n,r,i){var a=this;this.actions$=e,this.postLikeService=t,this.userFollowService=n,this.trendingPostService=r,this.store=i,this.onGetUserPostsRequest$=this.actions$.ofType(o.GET_TRENDING_POSTS).withLatestFrom(this.store.select(function(e){return e.trending.posts})).switchMap(function(e){var t=e[1];return a.trendingPostService.GetTredingPosts(e[0].payload,t.pageIndex,t.pageSize,t.order).map(function(e){return new u(e)}).catch(function(e){return ne.Observable.of(new c({error:e}))})}),this.onUserLikePost$=this.actions$.ofType(o.LIKE_POST).switchMap(function(e){return a.postLikeService.LikePost(e.payload.id).map(function(t){if(t.value.isActionSucceed)return new S({isLiked:t.value.isLiked,id:e.payload.id});new p({isLiked:t.value.isLiked,id:e.payload.id})}).catch(function(t){return ne.Observable.of(new p({isLiked:!1,id:e.payload.id}))})}),this.onUserUnlikePost$=this.actions$.ofType(o.UNLIKE_POST).switchMap(function(e){return a.postLikeService.UnlikePost(e.payload.id).map(function(t){if(t.value.isActionSucceed)return new O({isLiked:!1,id:e.payload.id});new E({isLiked:!0})}).catch(function(t){return ne.Observable.of(new E({isLiked:!0,id:e.payload.id}))})}),this.onFollowUser$=this.actions$.ofType(o.FOLLOW_USER).switchMap(function(e){return a.userFollowService.FollowUser(e.payload.username).map(function(t){return console.log(t.value),new T(ie({username:e.payload.username,postId:e.payload.postId},t.value))}).catch(function(t){return ne.Observable.of(new L({postId:e.payload.postId}))})}),this.onUnFollowUser$=this.actions$.ofType(o.UNFOLLOW_USER).switchMap(function(e){return a.userFollowService.UnfollowUser(e.payload.username).map(function(t){return console.log(t.value),new _(ie({username:e.payload.username,postId:e.payload.postId},t.value))}).catch(function(t){return ne.Observable.of(new h({postId:e.payload.postId}))})})}return Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onGetUserPostsRequest$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onUserLikePost$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onUserUnlikePost$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onFollowUser$\",void 0),Object(te.b)([Object(oe.b)(),Object(te.d)(\"design:type\",ne.Observable)],e.prototype,\"onUnFollowUser$\",void 0),e}(),se=n(\"zLqU\"),de=n(\"sPbQ\"),le=function(){return function(e){var t=this;this._http=e,this.GetTredingPosts=function(e,n,o,r){return void 0===e&&(e=\"WW\"),t._http.get(t.actionUrl+\"GetTredingPosts?langCode=\"+e+\"&pageIndex=\"+n+\"&pageSize=\"+o+\"&order=\"+r,{headers:t.headers})},this.actionUrl=V.a.serviceUrls.Base+\"api/Trending/\",this.headers=new Z.HttpHeaders,this.headers=this.headers.set(\"Content-Type\",\"application/json\"),this.headers=this.headers.set(\"Accept\",\"application/json\")}}(),ue=n(\"bfOx\");n.d(t,\"TrendingModuleNgFactory\",function(){return ce});var ce=r[\"\\u0275cmf\"](i,[],function(e){return r[\"\\u0275mod\"]([r[\"\\u0275mpd\"](512,r.ComponentFactoryResolver,r[\"\\u0275CodegenComponentFactoryResolver\"],[[8,[Y]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r[\"\\u0275mpd\"](4608,a.NgLocalization,a.NgLocaleLocalization,[r.LOCALE_ID,[2,a[\"\\u0275a\"]]]),r[\"\\u0275mpd\"](512,a.CommonModule,a.CommonModule,[]),r[\"\\u0275mpd\"](1024,s.k,function(){return[{key:\"trending\",reducerFactory:s.C,metaReducers:[],initialState:void 0}]},[]),r[\"\\u0275mpd\"](1024,s.t,function(){return[{interests:P,posts:x}]},[]),r[\"\\u0275mpd\"](1024,s.u,function(e){return[e]},[s.t]),r[\"\\u0275mpd\"](1024,s.b,function(e,t,n){return[s.z(e,t,n)]},[r.Injector,s.t,s.u]),r[\"\\u0275mpd\"](131584,s.p,s.p,[s.k,s.b,s.h]),r[\"\\u0275mpd\"](512,ee,ee,[Z.HttpClient]),r[\"\\u0275mpd\"](512,re,re,[oe.a,s.o,ee]),r[\"\\u0275mpd\"](512,ae,ae,[oe.a,se.a,de.a,le,s.o]),r[\"\\u0275mpd\"](1024,oe.i,function(e,t){return[oe.d(e,t)]},[re,ae]),r[\"\\u0275mpd\"](512,oe.g,oe.g,[oe.f,oe.i,[2,s.q]]),r[\"\\u0275mpd\"](512,ue.s,ue.s,[[2,ue.y],[2,ue.o]]),r[\"\\u0275mpd\"](512,i,i,[]),r[\"\\u0275mpd\"](1024,ue.m,function(){return[[{path:\"\",component:B,pathMatch:\"full\"}]]},[])])})}});","extractedComments":[]}