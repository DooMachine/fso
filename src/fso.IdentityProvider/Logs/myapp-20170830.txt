2017-08-30T00:05:02.4239361+03:00  [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation. (553c312b)
2017-08-30T00:05:03.3263159+03:00  [INF] Executed DbCommand (706ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0 (6438bdd5)
2017-08-30T00:05:04.7477590+03:00  [INF] Executed DbCommand (313ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:05:04.9128686+03:00  [WRN] Role "ba5d979d-3579-4fca-ab83-24bee2ef6265" validation failed: "DuplicateRoleName". (60d773c7)
2017-08-30T00:05:05.1205071+03:00  [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T00:05:05.1720411+03:00  [WRN] User "f3ed48e9-c78b-4622-8ac0-bcb96bca4056" validation failed: "DuplicateUserName". (5dc28e15)
2017-08-30T00:05:05.1815472+03:00  [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T00:05:05.2250763+03:00  [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:05:05.2831148+03:00  [INF] Executed DbCommand (7ms) [Parameters=[@__get_Item_0='?' (Size = 450), @__get_Item_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[UserId], [e].[RoleId]
FROM [AspNetUserRoles] AS [e]
WHERE ([e].[UserId] = @__get_Item_0) AND ([e].[RoleId] = @__get_Item_1) (6438bdd5)
2017-08-30T00:05:05.3441549+03:00  [WRN] User "3c7cca64-00cd-49cc-9407-3128eae83098" is already in role "fso.api.user". (337e5c15)
2017-08-30T00:08:45.6199455+03:00 0HL7F48HB9FEM [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:08:45.9416589+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:46.0412248+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (57ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:08:46.2493626+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:08:46.2543663+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:08:46.2838861+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:08:46.3074012+03:00 0HL7F48HB9FEM [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:08:46.3169088+03:00 0HL7F48HB9FEM [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:46.3439260+03:00 0HL7F48HB9FEM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:46.3764474+03:00 0HL7F48HB9FEM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:08:46.5385554+03:00 0HL7F48HB9FEM [INF] Request finished in 976.1952ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:08:48.0621914+03:00 0HL7F48HB9FEN [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration   (e5be5b71)
2017-08-30T00:08:48.0691965+03:00 0HL7F48HB9FEN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:48.0701975+03:00 0HL7F48HB9FEN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration" (f7642de5)
2017-08-30T00:08:48.2848398+03:00 0HL7F48HB9FEN [INF] Request finished in 223.0253ms 200 application/json (15c52c40)
2017-08-30T00:08:48.3198623+03:00 0HL7F48HB9FEO [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:08:48.3243655+03:00 0HL7F48HB9FEO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:48.3263676+03:00 0HL7F48HB9FEO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:08:48.4944788+03:00 0HL7F48HB9FEO [ERR] Invalid reference token.
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Reference\",
  \"TokenHandle\": \"ee1b5778bb9dc8719d913a9a5a8b761de05360a1e906005d7836f81b0fe6dfb8\"
}" (c9724191)
2017-08-30T00:08:48.4994833+03:00 0HL7F48HB9FEO [INF] Success token introspection. Token status: "inactive", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:08:48.5024841+03:00 0HL7F48HB9FEO [INF] Request finished in 181.946ms 200 application/json (15c52c40)
2017-08-30T00:08:49.6302321+03:00 0HL7F48HB9FEP [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.8595101866863991504040929624&state=15040409296240.13825343347405883   (e5be5b71)
2017-08-30T00:08:49.6342355+03:00 0HL7F48HB9FEP [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:49.6357363+03:00 0HL7F48HB9FEP [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:49.6362368+03:00 0HL7F48HB9FEP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:49.6442421+03:00 0HL7F48HB9FEP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:08:49.6732606+03:00 0HL7F48HB9FEP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:49.7538147+03:00 0HL7F48HB9FEP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:49.7813355+03:00 0HL7F48HB9FEP [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040409296240.13825343347405883\",
  \"Nonce\": \"N0.8595101866863991504040929624\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.8595101866863991504040929624\",
    \"state\": \"15040409296240.13825343347405883\"
  }
}" (9a175e33)
2017-08-30T00:08:49.7948415+03:00 0HL7F48HB9FEP [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:08:49.8068499+03:00 0HL7F48HB9FEP [INF] Showing consent: User has not yet consented (07b81e7e)
2017-08-30T00:08:49.8253620+03:00 0HL7F48HB9FEP [INF] Request finished in 195.6359ms 302  (15c52c40)
2017-08-30T00:08:49.8278642+03:00 0HL7F48HB9FEQ [INF] Request starting HTTP/1.1 GET http://localhost:5000/consent?returnUrl=%2Fconnect%2Fauthorize%2Fconsent%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.8595101866863991504040929624%26state%3D15040409296240.13825343347405883   (e5be5b71)
2017-08-30T00:08:49.8298648+03:00 0HL7F48HB9FEQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:49.8308662+03:00 0HL7F48HB9FEQ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:49.8313664+03:00 0HL7F48HB9FEQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:50.4452742+03:00 0HL7F48HB9FEQ [INF] Executing action method "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" with arguments (["/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.8595101866863991504040929624&state=15040409296240.13825343347405883"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T00:08:50.4667874+03:00 0HL7F48HB9FEQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:50.4677881+03:00 0HL7F48HB9FEQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:54.5689701+03:00 0HL7F48HB9FEQ [INF] Executing ViewResult, running view at path "/Views/Consent/Index.cshtml". (9707eebe)
2017-08-30T00:08:56.1401828+03:00 0HL7F48HB9FER [INF] Request starting HTTP/1.1 GET http://localhost:5000/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU   (e5be5b71)
2017-08-30T00:08:56.1421846+03:00 0HL7F48HB9FES [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/site.min.css?v=G7OG5flN0NdPJ13sNYOv3Hwkc-gAxRfBTYgtu6Sl0yk   (e5be5b71)
2017-08-30T00:08:56.1451854+03:00 0HL7F48HB9FER [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:56.1456859+03:00 0HL7F48HB9FER [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:56.1466878+03:00 0HL7F48HB9FER [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:56.1671996+03:00 0HL7F48HB9FEQ [INF] Executed action "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" in 5935.6093ms (afa2e885)
2017-08-30T00:08:56.1702020+03:00 0HL7F48HB9FER [INF] Sending file. Request path: '"/js/site.min.js"'. Physical path: '"C:\Users\okana\Documents\Visual Studio 2017\Projects\fso.Web\fso.IdentityProvider\wwwroot\js\site.min.js"' (27b0a520)
2017-08-30T00:08:56.1717032+03:00 0HL7F48HB9FEQ [INF] Request finished in 6344.1002ms 200 text/html; charset=utf-8 (15c52c40)
2017-08-30T00:08:56.1877134+03:00 0HL7F48HB9FER [INF] Request finished in 49.203ms 200 application/javascript (15c52c40)
2017-08-30T00:08:56.2466867+03:00 0HL7F48HB9FES [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:56.2471868+03:00 0HL7F48HB9FES [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:56.2471868+03:00 0HL7F48HB9FES [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:56.2481871+03:00 0HL7F48HB9FES [INF] Sending file. Request path: '"/css/site.min.css"'. Physical path: '"C:\Users\okana\Documents\Visual Studio 2017\Projects\fso.Web\fso.IdentityProvider\wwwroot\css\site.min.css"' (27b0a520)
2017-08-30T00:08:56.2501888+03:00 0HL7F48HB9FES [INF] Request finished in 111.6425ms 200 text/css (15c52c40)
2017-08-30T00:08:59.0427939+03:00 0HL7F48HB9FET [INF] Request starting HTTP/1.1 POST http://localhost:5000/consent application/x-www-form-urlencoded 676 (e5be5b71)
2017-08-30T00:08:59.0452958+03:00 0HL7F48HB9FET [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:59.0457963+03:00 0HL7F48HB9FET [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:59.0502987+03:00 0HL7F48HB9FET [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.1388573+03:00 0HL7F48HB9FET [INF] Executing action method "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" with arguments (["fso.IdentityProvider.Models.ConsentInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T00:08:59.1413588+03:00 0HL7F48HB9FET [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.1423610+03:00 0HL7F48HB9FET [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.1453610+03:00 0HL7F48HB9FET [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.1758815+03:00 0HL7F48HB9FET [INF] Executing RedirectResult, redirecting to "/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.8595101866863991504040929624&state=15040409296240.13825343347405883". (d98d540e)
2017-08-30T00:08:59.1773827+03:00 0HL7F48HB9FET [INF] Executed action "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" in 121.2651ms (afa2e885)
2017-08-30T00:08:59.1783837+03:00 0HL7F48HB9FET [INF] Request finished in 135.8578ms 302  (15c52c40)
2017-08-30T00:08:59.2374225+03:00 0HL7F48HB9FEU [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.8595101866863991504040929624&state=15040409296240.13825343347405883   (e5be5b71)
2017-08-30T00:08:59.2409251+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:08:59.2414252+03:00 0HL7F48HB9FEU [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:08:59.2419257+03:00 0HL7F48HB9FEU [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.2419257+03:00 0HL7F48HB9FEU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/consent" (f7642de5)
2017-08-30T00:08:59.2519324+03:00 0HL7F48HB9FEU [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.3535000+03:00 0HL7F48HB9FEU [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.3540009+03:00 0HL7F48HB9FEU [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040409296240.13825343347405883\",
  \"Nonce\": \"N0.8595101866863991504040929624\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.8595101866863991504040929624\",
    \"state\": \"15040409296240.13825343347405883\"
  }
}" (9a175e33)
2017-08-30T00:08:59.3570017+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:08:59.3655084+03:00 0HL7F48HB9FEU [INF] User consented to scopes: ["openid", "email", "profile", "fso.Api"] (0f706f38)
2017-08-30T00:08:59.4220449+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:08:59.4235461+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:08:59.4260480+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:08:59.4340533+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:08:59.4375554+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:08:59.4460613+03:00 0HL7F48HB9FEU [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:08:59.7757808+03:00 0HL7F48HB9FEU [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040409296240.13825343347405883\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:08:59.7907895+03:00 0HL7F48HB9FEU [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:08:59.7967935+03:00 0HL7F48HB9FEU [INF] Request finished in 559.9397ms 302  (15c52c40)
2017-08-30T00:09:06.2280447+03:00 0HL7F48HB9FEV [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:09:06.2300457+03:00 0HL7F48HB9FEV [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:06.2305454+03:00 0HL7F48HB9FEV [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:09:06.2310459+03:00 0HL7F48HB9FEV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:09:06.2310459+03:00 0HL7F48HB9FEV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:09:06.2350486+03:00 0HL7F48HB9FEV [INF] Request finished in 4.0997ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:09:06.3201047+03:00 0HL7F48HB9FF0 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:09:06.3566295+03:00 0HL7F48HB9FF0 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:06.3571292+03:00 0HL7F48HB9FF0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:09:06.3966561+03:00 0HL7F48HB9FF0 [INF] Request finished in 72.679ms 200 application/json (15c52c40)
2017-08-30T00:09:06.5916704+03:00 0HL7F48HB9FF1 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:09:06.6051807+03:00 0HL7F48HB9FF1 [INF] Request finished in 13.4242ms 204  (15c52c40)
2017-08-30T00:09:06.7746834+03:00 0HL7F48HB9FF2 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:09:06.7804399+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:06.7824428+03:00 0HL7F48HB9FF2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:09:06.8069545+03:00 0HL7F48HB9FF2 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:09:06.8544878+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:06.8734989+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:09:06.8755002+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:09:06.8775019+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:09:06.8795033+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:09:06.8880087+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:09:06.8920114+03:00 0HL7F48HB9FF2 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:09:06.8930128+03:00 0HL7F48HB9FF2 [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:09:06.9015175+03:00 0HL7F48HB9FF2 [INF] Request finished in 128.2721ms 200 application/json (15c52c40)
2017-08-30T00:09:08.0382469+03:00 0HL7F48HB9FF3 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:09:08.0412485+03:00 0HL7F48HB9FF3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:08.0417487+03:00 0HL7F48HB9FF3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:09:08.0702678+03:00 0HL7F48HB9FF3 [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:08.0737707+03:00 0HL7F48HB9FF3 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:09:08.0747706+03:00 0HL7F48HB9FF3 [INF] Request finished in 37.3178ms 200 application/json (15c52c40)
2017-08-30T00:09:11.1760706+03:00 0HL7F48HB9FF4 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:09:11.1790722+03:00 0HL7F48HB9FF4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:11.1790722+03:00 0HL7F48HB9FF4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:09:11.1945827+03:00 0HL7F48HB9FF4 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:11.1950832+03:00 0HL7F48HB9FF4 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:09:11.1955833+03:00 0HL7F48HB9FF4 [INF] Request finished in 19.7417ms 200 application/json (15c52c40)
2017-08-30T00:09:13.8892652+03:00 0HL7F48HB9FF5 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:09:13.8917666+03:00 0HL7F48HB9FF5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:13.8917666+03:00 0HL7F48HB9FF5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:09:13.9112798+03:00 0HL7F48HB9FF5 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:13.9117803+03:00 0HL7F48HB9FF5 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:09:13.9127810+03:00 0HL7F48HB9FF5 [INF] Request finished in 23.56ms 200 application/json (15c52c40)
2017-08-30T00:09:29.6911593+03:00 0HL7F48HB9FF6 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:09:29.6936615+03:00 0HL7F48HB9FF6 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:29.6936615+03:00 0HL7F48HB9FF6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:09:29.7146759+03:00 0HL7F48HB9FF6 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:29.7151760+03:00 0HL7F48HB9FF6 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:09:29.7161767+03:00 0HL7F48HB9FF6 [INF] Request finished in 25.1539ms 200 application/json (15c52c40)
2017-08-30T00:09:32.0537282+03:00 0HL7F48HB9FF7 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:09:32.0562301+03:00 0HL7F48HB9FF7 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:09:32.0567306+03:00 0HL7F48HB9FF7 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:09:32.0797459+03:00 0HL7F48HB9FF7 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:09:32.0827483+03:00 0HL7F48HB9FF7 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:09:32.1057628+03:00 0HL7F48HB9FF7 [INF] Request finished in 32.6382ms 200 application/json (15c52c40)
2017-08-30T00:14:01.9125441+03:00 0HL7F48HB9FF8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.59410629060811871504041241869&state=15040412418690.8075228348896144   (e5be5b71)
2017-08-30T00:14:01.9185493+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:14:01.9185493+03:00 0HL7F48HB9FF8 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:14:01.9195496+03:00 0HL7F48HB9FF8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:01.9195496+03:00 0HL7F48HB9FF8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:14:01.9215505+03:00 0HL7F48HB9FF8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:01.9225516+03:00 0HL7F48HB9FF8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:01.9235538+03:00 0HL7F48HB9FF8 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040412418690.8075228348896144\",
  \"Nonce\": \"N0.59410629060811871504041241869\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.59410629060811871504041241869\",
    \"state\": \"15040412418690.8075228348896144\"
  }
}" (9a175e33)
2017-08-30T00:14:01.9305569+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:14:01.9475694+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:01.9505702+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:14:01.9515704+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:14:01.9535714+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:14:01.9545728+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:01.9565734+03:00 0HL7F48HB9FF8 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:14:01.9715829+03:00 0HL7F48HB9FF8 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040412418690.8075228348896144\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:14:01.9725836+03:00 0HL7F48HB9FF8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:01.9735855+03:00 0HL7F48HB9FF8 [INF] Request finished in 61.2998ms 302  (15c52c40)
2017-08-30T00:14:07.3311428+03:00 0HL7F48HB9FF9 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:14:07.3341447+03:00 0HL7F48HB9FF9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:14:07.3341447+03:00 0HL7F48HB9FF9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:14:07.3351446+03:00 0HL7F48HB9FF9 [INF] Request finished in 4.3093ms 200 application/json (15c52c40)
2017-08-30T00:14:07.5803074+03:00 0HL7F48HB9FFA [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.182561749669820641504041247411&state=15040412474110.9704068692459016   (e5be5b71)
2017-08-30T00:14:07.5843097+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:14:07.5843097+03:00 0HL7F48HB9FFA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:14:07.5853099+03:00 0HL7F48HB9FFA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:07.5853099+03:00 0HL7F48HB9FFA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:14:07.5863110+03:00 0HL7F48HB9FFA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:07.5863110+03:00 0HL7F48HB9FFA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:07.5863110+03:00 0HL7F48HB9FFA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040412474110.9704068692459016\",
  \"Nonce\": \"N0.182561749669820641504041247411\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.182561749669820641504041247411\",
    \"state\": \"15040412474110.9704068692459016\"
  }
}" (9a175e33)
2017-08-30T00:14:07.5903136+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:14:07.6053236+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:07.6073249+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:14:07.6093263+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:14:07.6113276+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:14:07.6133289+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:07.6173316+03:00 0HL7F48HB9FFA [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:14:07.6413479+03:00 0HL7F48HB9FFA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040412474110.9704068692459016\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:14:07.6423486+03:00 0HL7F48HB9FFA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:14:07.6433492+03:00 0HL7F48HB9FFA [INF] Request finished in 63.5704ms 302  (15c52c40)
2017-08-30T00:14:10.8594848+03:00 0HL7F48HB9FFB [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:14:10.8624864+03:00 0HL7F48HB9FFB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:14:10.8624864+03:00 0HL7F48HB9FFB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:14:10.8634875+03:00 0HL7F48HB9FFB [INF] Request finished in 3.8285ms 200 application/json (15c52c40)
2017-08-30T00:14:11.1416714+03:00 0HL7F48HB9FFC [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:14:11.1426729+03:00 0HL7F48HB9FFC [INF] Request finished in 1.2252ms 204  (15c52c40)
2017-08-30T00:14:11.1957073+03:00 0HL7F48HB9FFD [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:14:11.1987101+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:14:11.1987101+03:00 0HL7F48HB9FFD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:14:11.1997103+03:00 0HL7F48HB9FFD [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:14:11.2207243+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:14:11.2237267+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:11.2277285+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:14:11.2297299+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:14:11.2317312+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:14:11.2347336+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:14:11.2367345+03:00 0HL7F48HB9FFD [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:14:11.2367345+03:00 0HL7F48HB9FFD [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:14:11.2387362+03:00 0HL7F48HB9FFD [INF] Request finished in 41.5171ms 200 application/json (15c52c40)
2017-08-30T00:19:10.0419954+03:00 0HL7F48HB9FFE [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.84740135809477211504041549943&state=15040415499430.30569851345928445   (e5be5b71)
2017-08-30T00:19:10.3401393+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:19:10.3411399+03:00 0HL7F48HB9FFE [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:19:10.3421402+03:00 0HL7F48HB9FFE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:10.3421402+03:00 0HL7F48HB9FFE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:19:10.3426411+03:00 0HL7F48HB9FFE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:10.3436422+03:00 0HL7F48HB9FFE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:10.3436422+03:00 0HL7F48HB9FFE [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040415499430.30569851345928445\",
  \"Nonce\": \"N0.84740135809477211504041549943\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.84740135809477211504041549943\",
    \"state\": \"15040415499430.30569851345928445\"
  }
}" (9a175e33)
2017-08-30T00:19:10.3896731+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (42ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:19:10.4066836+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:10.4101858+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:19:10.4146882+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:19:10.4236957+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:19:10.4261960+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:10.4306992+03:00 0HL7F48HB9FFE [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:19:10.4512126+03:00 0HL7F48HB9FFE [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040415499430.30569851345928445\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:19:10.4522141+03:00 0HL7F48HB9FFE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:10.4532143+03:00 0HL7F48HB9FFE [INF] Request finished in 412.462ms 302  (15c52c40)
2017-08-30T00:19:17.0255130+03:00 0HL7F48HB9FFF [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:19:17.0295157+03:00 0HL7F48HB9FFF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:19:17.0295157+03:00 0HL7F48HB9FFF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:19:17.0305175+03:00 0HL7F48HB9FFF [INF] Request finished in 4.9902ms 200 application/json (15c52c40)
2017-08-30T00:19:17.2261464+03:00 0HL7F48HB9FFG [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.4939241895427121504041557121&state=15040415571210.7023137045219374   (e5be5b71)
2017-08-30T00:19:17.2296485+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:19:17.2301487+03:00 0HL7F48HB9FFG [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:19:17.2306488+03:00 0HL7F48HB9FFG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:17.2306488+03:00 0HL7F48HB9FFG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:19:17.2311497+03:00 0HL7F48HB9FFG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:17.2331511+03:00 0HL7F48HB9FFG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:17.2336548+03:00 0HL7F48HB9FFG [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040415571210.7023137045219374\",
  \"Nonce\": \"N0.4939241895427121504041557121\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.4939241895427121504041557121\",
    \"state\": \"15040415571210.7023137045219374\"
  }
}" (9a175e33)
2017-08-30T00:19:17.2391551+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:19:17.2876871+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:17.3297154+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:19:17.3457256+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (12ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:19:17.3482275+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:19:17.3597349+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:17.3612361+03:00 0HL7F48HB9FFG [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:19:17.3977609+03:00 0HL7F48HB9FFG [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040415571210.7023137045219374\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:19:17.4032636+03:00 0HL7F48HB9FFG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:19:17.4122700+03:00 0HL7F48HB9FFG [INF] Request finished in 179.6111ms 302  (15c52c40)
2017-08-30T00:19:24.0331816+03:00 0HL7F48HB9FFH [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:19:24.0371839+03:00 0HL7F48HB9FFH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:19:24.0371839+03:00 0HL7F48HB9FFH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:19:24.0386855+03:00 0HL7F48HB9FFH [INF] Request finished in 5.5267ms 200 application/json (15c52c40)
2017-08-30T00:19:24.3994248+03:00 0HL7F48HB9FFI [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:19:24.4014269+03:00 0HL7F48HB9FFI [INF] Request finished in 1.2698ms 204  (15c52c40)
2017-08-30T00:19:24.4289442+03:00 0HL7F48HB9FFJ [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:19:24.4309459+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:19:24.4314464+03:00 0HL7F48HB9FFJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:19:24.4314464+03:00 0HL7F48HB9FFJ [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:19:24.4484569+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:19:24.4519599+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:24.4539608+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:19:24.4554616+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:19:24.4569636+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:19:24.4584644+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:19:24.4609650+03:00 0HL7F48HB9FFJ [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:19:24.4614660+03:00 0HL7F48HB9FFJ [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:19:24.4624666+03:00 0HL7F48HB9FFJ [INF] Request finished in 33.0274ms 200 application/json (15c52c40)
2017-08-30T00:23:36.9522703+03:00 0HL7F48HB9FFK [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:23:36.9557728+03:00 0HL7F48HB9FFK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:23:36.9562730+03:00 0HL7F48HB9FFK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:23:36.9812896+03:00 0HL7F48HB9FFK [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:23:36.9817905+03:00 0HL7F48HB9FFK [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:23:36.9827912+03:00 0HL7F48HB9FFK [INF] Request finished in 30.7028ms 200 application/json (15c52c40)
2017-08-30T00:24:49.4001385+03:00 0HL7F48HB9FFL [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.57091561997701781504041887746&state=15040418877460.5441417093745293   (e5be5b71)
2017-08-30T00:24:49.4041415+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:24:49.4041415+03:00 0HL7F48HB9FFL [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:24:49.4051422+03:00 0HL7F48HB9FFL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:49.4051422+03:00 0HL7F48HB9FFL [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:24:49.4051422+03:00 0HL7F48HB9FFL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:49.4061425+03:00 0HL7F48HB9FFL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:49.4061425+03:00 0HL7F48HB9FFL [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040418877460.5441417093745293\",
  \"Nonce\": \"N0.57091561997701781504041887746\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.57091561997701781504041887746\",
    \"state\": \"15040418877460.5441417093745293\"
  }
}" (9a175e33)
2017-08-30T00:24:49.4121460+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:24:49.4251551+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:24:49.4291577+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:24:49.4341614+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:24:49.4391687+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:24:49.4406699+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:24:49.4441724+03:00 0HL7F48HB9FFL [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:24:49.4572040+03:00 0HL7F48HB9FFL [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040418877460.5441417093745293\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:24:49.4572040+03:00 0HL7F48HB9FFL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:49.4582050+03:00 0HL7F48HB9FFL [INF] Request finished in 77.8062ms 302  (15c52c40)
2017-08-30T00:24:52.0906202+03:00 0HL7F48HB9FFM [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.056442390687948541504041890749&state=15040418907490.7346169708275601   (e5be5b71)
2017-08-30T00:24:52.1126344+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:24:52.1166374+03:00 0HL7F48HB9FFM [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:24:52.1186384+03:00 0HL7F48HB9FFM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:52.1186384+03:00 0HL7F48HB9FFM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:24:52.1196406+03:00 0HL7F48HB9FFM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:52.1206397+03:00 0HL7F48HB9FFM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:52.1206397+03:00 0HL7F48HB9FFM [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040418907490.7346169708275601\",
  \"Nonce\": \"N0.056442390687948541504041890749\",
  \"SessionId\": \"945c3c357f269d3f058f398d0f46056c\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.056442390687948541504041890749\",
    \"state\": \"15040418907490.7346169708275601\"
  }
}" (9a175e33)
2017-08-30T00:24:52.1456559+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:24:52.1586649+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:24:52.1616665+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:24:52.1716759+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:24:52.1856848+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:24:52.1956891+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:24:52.1966902+03:00 0HL7F48HB9FFM [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:24:52.2227106+03:00 0HL7F48HB9FFM [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040418907490.7346169708275601\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:24:52.2237077+03:00 0HL7F48HB9FFM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:24:52.2247088+03:00 0HL7F48HB9FFM [INF] Request finished in 352.6262ms 302  (15c52c40)
2017-08-30T00:31:48.7728696+03:00 0HL7F48HB9FFN [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:31:49.1651343+03:00 0HL7F48HB9FFN [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:49.1671341+03:00 0HL7F48HB9FFN [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:31:49.1681339+03:00 0HL7F48HB9FFN [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:49.1681339+03:00 0HL7F48HB9FFN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:31:49.1701353+03:00 0HL7F48HB9FFN [INF] Request finished in 396.7865ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:31:50.0877413+03:00 0HL7F48HB9FFO [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:31:50.0907441+03:00 0HL7F48HB9FFO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:50.0907441+03:00 0HL7F48HB9FFO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:31:50.0927446+03:00 0HL7F48HB9FFO [ERR] Invalid reference token.
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Reference\",
  \"TokenHandle\": \"9eea8ae786c79980ed34b61294d3e7a7a3e4fcb6576194e83d29c0e28981fd0e\"
}" (c9724191)
2017-08-30T00:31:50.0927446+03:00 0HL7F48HB9FFO [INF] Success token introspection. Token status: "inactive", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:31:50.0927446+03:00 0HL7F48HB9FFO [INF] Request finished in 5.237ms 200 application/json (15c52c40)
2017-08-30T00:31:51.9239612+03:00 0HL7F48HB9FFP [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjIyYjYxOGUyNzQyODE1ZDgzZTAwYzY2NmZmZTVlNmVlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MDQwNDE1NTcsImV4cCI6MTUwNDA0MTg1NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZnNvLkFuZ3VsYXJDbGllbnQiLCJub25jZSI6Ik4wLjQ5MzkyNDE4OTU0MjcxMjE1MDQwNDE1NTcxMjEiLCJpYXQiOjE1MDQwNDE1NTcsImF0X2hhc2giOiJhRFprZlNWVDhFRHotSWQzUXVnbHBBIiwic2lkIjoiOTQ1YzNjMzU3ZjI2OWQzZjA1OGYzOThkMGY0NjA1NmMiLCJzdWIiOiIzYzdjY2E2NC0wMGNkLTQ5Y2MtOTQwNy0zMTI4ZWFlODMwOTgiLCJhdXRoX3RpbWUiOjE1MDM3NjE1NTYsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.pcqsLFKNrPGeZPqGEJEP5JoJERDnREXq8S_23eXUS-Sw5Qhn6CavPRZezWhsItbTRngq7JQxZh5CcFqfSt3tq9zgCMk3QiXH_IWecgyqnTKOasRYgYH7kqsayOu08ss90WBJAbtQz0bp5b7E_20Po-DpJafMB_5wjx_iuHyNK-7LdrMfjkGPzqcAh54m8C4zyDhbpbxKFA0EPv9SuzzIgSk_z7b4O1rVhxFmI-wxc-xfOUq77xIYto-2G_36v2xIZwZL8EAxlqcsVeYfbnmKFavxiYvyenk1npX3FbtWfzdCWiWKGrWzpiCH0HWAE31hBz2AsNSr2wrW_ZhIHcuchQ&post_logout_redirect_uri=http://localhost:65271/unauthorized   (e5be5b71)
2017-08-30T00:31:51.9269628+03:00 0HL7F48HB9FFP [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:51.9279634+03:00 0HL7F48HB9FFP [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:31:51.9289645+03:00 0HL7F48HB9FFP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:51.9299648+03:00 0HL7F48HB9FFP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-08-30T00:31:51.9399718+03:00 0HL7F48HB9FFP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.0820654+03:00 0HL7F48HB9FFP [INF] Executed DbCommand (41ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:31:52.0840667+03:00 0HL7F48HB9FFP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.0890696+03:00 0HL7F48HB9FFP [INF] End session request validation success
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"PostLogOutUri\": \"http://localhost:65271/unauthorized\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjIyYjYxOGUyNzQyODE1ZDgzZTAwYzY2NmZmZTVlNmVlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MDQwNDE1NTcsImV4cCI6MTUwNDA0MTg1NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZnNvLkFuZ3VsYXJDbGllbnQiLCJub25jZSI6Ik4wLjQ5MzkyNDE4OTU0MjcxMjE1MDQwNDE1NTcxMjEiLCJpYXQiOjE1MDQwNDE1NTcsImF0X2hhc2giOiJhRFprZlNWVDhFRHotSWQzUXVnbHBBIiwic2lkIjoiOTQ1YzNjMzU3ZjI2OWQzZjA1OGYzOThkMGY0NjA1NmMiLCJzdWIiOiIzYzdjY2E2NC0wMGNkLTQ5Y2MtOTQwNy0zMTI4ZWFlODMwOTgiLCJhdXRoX3RpbWUiOjE1MDM3NjE1NTYsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.pcqsLFKNrPGeZPqGEJEP5JoJERDnREXq8S_23eXUS-Sw5Qhn6CavPRZezWhsItbTRngq7JQxZh5CcFqfSt3tq9zgCMk3QiXH_IWecgyqnTKOasRYgYH7kqsayOu08ss90WBJAbtQz0bp5b7E_20Po-DpJafMB_5wjx_iuHyNK-7LdrMfjkGPzqcAh54m8C4zyDhbpbxKFA0EPv9SuzzIgSk_z7b4O1rVhxFmI-wxc-xfOUq77xIYto-2G_36v2xIZwZL8EAxlqcsVeYfbnmKFavxiYvyenk1npX3FbtWfzdCWiWKGrWzpiCH0HWAE31hBz2AsNSr2wrW_ZhIHcuchQ\",
    \"post_logout_redirect_uri\": \"http://localhost:65271/unauthorized\"
  }
}" (8a893fca)
2017-08-30T00:31:52.1140870+03:00 0HL7F48HB9FFP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1150873+03:00 0HL7F48HB9FFP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1190899+03:00 0HL7F48HB9FFP [INF] Request finished in 195.6584ms 302  (15c52c40)
2017-08-30T00:31:52.1210925+03:00 0HL7F48HB9FFQ [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/logout?logoutId=ee78958e9a5813f9a0807655140d4990   (e5be5b71)
2017-08-30T00:31:52.1230938+03:00 0HL7F48HB9FFQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:52.1240952+03:00 0HL7F48HB9FFQ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:31:52.1250955+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1501109+03:00 0HL7F48HB9FFQ [INF] Executing action method "IdentityServerWithAspNetIdentity.Controllers.AccountController.Logout (fso.IdentityProvider)" with arguments (["ee78958e9a5813f9a0807655140d4990"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T00:31:52.1691232+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1701234+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1961407+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" signed out. (d3f50c8d)
2017-08-30T00:31:52.1971414+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.External" signed out. (d3f50c8d)
2017-08-30T00:31:52.1971414+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.TwoFactorUserId" signed out. (d3f50c8d)
2017-08-30T00:31:52.1981416+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.1981416+03:00 0HL7F48HB9FFQ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:31:52.2701918+03:00 0HL7F48HB9FFQ [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-08-30T00:31:52.2811984+03:00 0HL7F48HB9FFQ [INF] Executed action "IdentityServerWithAspNetIdentity.Controllers.AccountController.Logout (fso.IdentityProvider)" in 154.1638ms (afa2e885)
2017-08-30T00:31:52.2821986+03:00 0HL7F48HB9FFQ [INF] Request finished in 161.4977ms 200 text/html; charset=utf-8 (15c52c40)
2017-08-30T00:31:52.6194221+03:00 0HL7F48HB9FFR [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/endsession/callback?sid=945c3c357f269d3f058f398d0f46056c&logoutId=ee78958e9a5813f9a0807655140d4990   (e5be5b71)
2017-08-30T00:31:52.6234252+03:00 0HL7F48HB9FFR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:52.6234252+03:00 0HL7F48HB9FFR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-08-30T00:31:52.6374345+03:00 0HL7F48HB9FFR [INF] Successful signout callback. Client logout iframe urls: [] (76941251)
2017-08-30T00:31:52.6484418+03:00 0HL7F48HB9FFR [INF] Request finished in 28.5297ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:31:59.0863120+03:00 0HL7F48HB9FFS [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.40274547550498551504042319081&state=15040423190810.3180633299053186   (e5be5b71)
2017-08-30T00:31:59.0893128+03:00 0HL7F48HB9FFS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:59.0893128+03:00 0HL7F48HB9FFS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:31:59.0913141+03:00 0HL7F48HB9FFS [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040423190810.3180633299053186\",
  \"Nonce\": \"N0.40274547550498551504042319081\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.40274547550498551504042319081\",
    \"state\": \"15040423190810.3180633299053186\"
  }
}" (9a175e33)
2017-08-30T00:31:59.0913141+03:00 0HL7F48HB9FFS [INF] Showing login: User is not authenticated (4b8d50b2)
2017-08-30T00:31:59.0943157+03:00 0HL7F48HB9FFS [INF] Request finished in 8.5382ms 302  (15c52c40)
2017-08-30T00:31:59.0973181+03:00 0HL7F48HB9FFT [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.40274547550498551504042319081%26state%3D15040423190810.3180633299053186   (e5be5b71)
2017-08-30T00:31:59.1013207+03:00 0HL7F48HB9FFT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:31:59.1053222+03:00 0HL7F48HB9FFT [INF] Executing action method "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" with arguments (["/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.40274547550498551504042319081&state=15040423190810.3180633299053186"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T00:31:59.3635098+03:00 0HL7F48HB9FFT [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-08-30T00:31:59.5216045+03:00 0HL7F48HB9FFT [INF] Executed action "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" in 421.961ms (afa2e885)
2017-08-30T00:31:59.5226048+03:00 0HL7F48HB9FFT [INF] Request finished in 425.7011ms 200 text/html; charset=utf-8 (15c52c40)
2017-08-30T00:32:05.5366050+03:00 0HL7F48HB9FFU [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login?returnurl=%2Fconnect%2Fauthorize%2Flogin%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.40274547550498551504042319081%26state%3D15040423190810.3180633299053186 application/x-www-form-urlencoded 252 (e5be5b71)
2017-08-30T00:32:05.5416079+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:05.5956442+03:00 0HL7F48HB9FFU [INF] Executing action method "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" with arguments (["fso.IdentityProvider.Models.AccountViewModels.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T00:32:05.6136566+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T00:32:05.8007796+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (82ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:05.8047834+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:32:05.8087865+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:32:05.8157900+03:00 0HL7F48HB9FFU [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:32:05.8478116+03:00 0HL7F48HB9FFU [INF] AuthenticationScheme: "Identity.Application" signed in. (c66dd7e7)
2017-08-30T00:32:05.8488123+03:00 0HL7F48HB9FFU [INF] User logged in. (fdce0db4)
2017-08-30T00:32:05.8508132+03:00 0HL7F48HB9FFU [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.40274547550498551504042319081&state=15040423190810.3180633299053186". (d98d540e)
2017-08-30T00:32:05.8508132+03:00 0HL7F48HB9FFU [INF] Executed action "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" in 312.4275ms (afa2e885)
2017-08-30T00:32:05.8518139+03:00 0HL7F48HB9FFU [INF] Request finished in 323.0866ms 302  (15c52c40)
2017-08-30T00:32:05.8548167+03:00 0HL7F48HB9FFV [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.40274547550498551504042319081&state=15040423190810.3180633299053186   (e5be5b71)
2017-08-30T00:32:05.8568180+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:05.8578179+03:00 0HL7F48HB9FFV [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:32:05.8578179+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:05.8588189+03:00 0HL7F48HB9FFV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-08-30T00:32:05.8638270+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:05.8648229+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:05.8648229+03:00 0HL7F48HB9FFV [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040423190810.3180633299053186\",
  \"Nonce\": \"N0.40274547550498551504042319081\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.40274547550498551504042319081\",
    \"state\": \"15040423190810.3180633299053186\"
  }
}" (9a175e33)
2017-08-30T00:32:05.8698266+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:05.8828345+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:05.8848358+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:32:05.8858373+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:32:05.8878382+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:32:05.8898391+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:05.8948432+03:00 0HL7F48HB9FFV [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:32:05.9078523+03:00 0HL7F48HB9FFV [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040423190810.3180633299053186\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:32:05.9078523+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:05.9168575+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:05.9188596+03:00 0HL7F48HB9FFV [INF] AuthenticationScheme: "Identity.Application" signed in. (c66dd7e7)
2017-08-30T00:32:05.9198594+03:00 0HL7F48HB9FFV [INF] Request finished in 65.7197ms 302  (15c52c40)
2017-08-30T00:32:09.2500704+03:00 0HL7F48HB9FG0 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:32:09.2530724+03:00 0HL7F48HB9FG0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:09.2540730+03:00 0HL7F48HB9FG0 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:32:09.2540730+03:00 0HL7F48HB9FG0 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:09.2540730+03:00 0HL7F48HB9FG0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:32:09.2550737+03:00 0HL7F48HB9FG0 [INF] Request finished in 5.0226ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:32:09.2650808+03:00 0HL7F48HB9FG1 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:32:09.2680820+03:00 0HL7F48HB9FG1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:09.2690826+03:00 0HL7F48HB9FG1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:32:09.2700837+03:00 0HL7F48HB9FG1 [INF] Request finished in 4.6614ms 200 application/json (15c52c40)
2017-08-30T00:32:09.3821585+03:00 0HL7F48HB9FG2 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:32:09.3831591+03:00 0HL7F48HB9FG2 [INF] Request finished in 0.9264ms 204  (15c52c40)
2017-08-30T00:32:09.4141793+03:00 0HL7F48HB9FG3 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:32:09.4181824+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:09.4181824+03:00 0HL7F48HB9FG3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:32:09.4181824+03:00 0HL7F48HB9FG3 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:32:09.4662147+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:09.4962338+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:09.4982352+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:32:09.5182480+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:32:09.5612778+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:32:09.5822913+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:09.5892952+03:00 0HL7F48HB9FG3 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:32:09.5902971+03:00 0HL7F48HB9FG3 [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:32:09.5963003+03:00 0HL7F48HB9FG3 [INF] Request finished in 179.1501ms 200 application/json (15c52c40)
2017-08-30T00:32:12.0369502+03:00 0HL7F48HB9FG4 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.21745429265401151504042332032&state=15040423320320.3992563562378626   (e5be5b71)
2017-08-30T00:32:12.0409521+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:12.0409521+03:00 0HL7F48HB9FG4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:32:12.0419535+03:00 0HL7F48HB9FG4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:12.0419535+03:00 0HL7F48HB9FG4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:32:12.0429534+03:00 0HL7F48HB9FG4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:12.0439549+03:00 0HL7F48HB9FG4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:12.0439549+03:00 0HL7F48HB9FG4 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040423320320.3992563562378626\",
  \"Nonce\": \"N0.21745429265401151504042332032\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.21745429265401151504042332032\",
    \"state\": \"15040423320320.3992563562378626\"
  }
}" (9a175e33)
2017-08-30T00:32:12.0489574+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:12.0569639+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:12.0589640+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:32:12.0609658+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:32:12.0629663+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:32:12.0659695+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:12.0679704+03:00 0HL7F48HB9FG4 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:32:12.0819817+03:00 0HL7F48HB9FG4 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040423320320.3992563562378626\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:32:12.0829796+03:00 0HL7F48HB9FG4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:12.0839810+03:00 0HL7F48HB9FG4 [INF] Request finished in 47.9229ms 302  (15c52c40)
2017-08-30T00:32:14.3835077+03:00 0HL7F48HB9FG5 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:32:14.3865109+03:00 0HL7F48HB9FG5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:14.3865109+03:00 0HL7F48HB9FG5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:32:14.3875104+03:00 0HL7F48HB9FG5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:32:14.3875104+03:00 0HL7F48HB9FG5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:32:14.3885106+03:00 0HL7F48HB9FG5 [INF] Request finished in 4.5379ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:32:14.3955173+03:00 0HL7F48HB9FG6 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:32:14.4005194+03:00 0HL7F48HB9FG6 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:14.4005194+03:00 0HL7F48HB9FG6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:32:14.4025207+03:00 0HL7F48HB9FG6 [INF] Request finished in 5.9503ms 200 application/json (15c52c40)
2017-08-30T00:32:14.4825739+03:00 0HL7F48HB9FG7 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:32:14.4835745+03:00 0HL7F48HB9FG7 [INF] Request finished in 0.6994ms 204  (15c52c40)
2017-08-30T00:32:14.4895781+03:00 0HL7F48HB9FG8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:32:14.4945830+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:14.4945830+03:00 0HL7F48HB9FG8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:32:14.4945830+03:00 0HL7F48HB9FG8 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:32:14.5506190+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:14.5536202+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:14.5656290+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:32:14.5686306+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:32:14.5716322+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:32:14.5736339+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:32:14.5806386+03:00 0HL7F48HB9FG8 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:32:14.5806386+03:00 0HL7F48HB9FG8 [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:32:14.5816396+03:00 0HL7F48HB9FG8 [INF] Request finished in 92.5387ms 200 application/json (15c52c40)
2017-08-30T00:32:16.0876387+03:00 0HL7F48HB9FG9 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:32:16.0896412+03:00 0HL7F48HB9FG9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:16.0896412+03:00 0HL7F48HB9FG9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:32:16.1056506+03:00 0HL7F48HB9FG9 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:16.1056506+03:00 0HL7F48HB9FG9 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:32:16.1066517+03:00 0HL7F48HB9FG9 [INF] Request finished in 19.3714ms 200 application/json (15c52c40)
2017-08-30T00:32:17.9598825+03:00 0HL7F48HB9FGA [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:32:17.9638847+03:00 0HL7F48HB9FGA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:32:17.9638847+03:00 0HL7F48HB9FGA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:32:17.9879003+03:00 0HL7F48HB9FGA [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:32:17.9879003+03:00 0HL7F48HB9FGA [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:32:17.9889017+03:00 0HL7F48HB9FGA [INF] Request finished in 29.9875ms 200 application/json (15c52c40)
2017-08-30T00:33:04.6798117+03:00 0HL7F48HB9FGB [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:33:04.6838148+03:00 0HL7F48HB9FGB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:33:04.6838148+03:00 0HL7F48HB9FGB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:33:04.7058294+03:00 0HL7F48HB9FGB [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:33:04.7068300+03:00 0HL7F48HB9FGB [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:33:04.7078307+03:00 0HL7F48HB9FGB [INF] Request finished in 27.8082ms 200 application/json (15c52c40)
2017-08-30T00:35:19.1450760+03:00 0HL7F48HB9FGC [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:35:19.1480780+03:00 0HL7F48HB9FGC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:35:19.1480780+03:00 0HL7F48HB9FGC [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:35:19.1490775+03:00 0HL7F48HB9FGC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:35:19.1490775+03:00 0HL7F48HB9FGC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:35:19.1490775+03:00 0HL7F48HB9FGC [INF] Request finished in 4.8762ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:35:27.1889561+03:00 0HL7F48HB9FGD [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:35:27.1919580+03:00 0HL7F48HB9FGD [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:35:27.1919580+03:00 0HL7F48HB9FGD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:35:27.2139723+03:00 0HL7F48HB9FGD [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:35:27.2139723+03:00 0HL7F48HB9FGD [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:35:27.2149741+03:00 0HL7F48HB9FGD [INF] Request finished in 26.7799ms 200 application/json (15c52c40)
2017-08-30T00:35:29.6095635+03:00 0HL7F48HB9FGE [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:35:29.6125659+03:00 0HL7F48HB9FGE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:35:29.6135658+03:00 0HL7F48HB9FGE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:35:29.6355808+03:00 0HL7F48HB9FGE [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:35:29.6365822+03:00 0HL7F48HB9FGE [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:35:29.6445864+03:00 0HL7F48HB9FGE [INF] Request finished in 27.8666ms 200 application/json (15c52c40)
2017-08-30T00:36:11.3093014+03:00 0HL7F48HB9FGF [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:36:11.3133037+03:00 0HL7F48HB9FGF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:36:11.3133037+03:00 0HL7F48HB9FGF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:36:11.3423234+03:00 0HL7F48HB9FGF [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:36:11.3423234+03:00 0HL7F48HB9FGF [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:36:11.3433236+03:00 0HL7F48HB9FGF [INF] Request finished in 34.6364ms 200 application/json (15c52c40)
2017-08-30T00:37:49.1359406+03:00 0HL7F48HB9FGG [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:37:49.1399428+03:00 0HL7F48HB9FGG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:49.1399428+03:00 0HL7F48HB9FGG [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:37:49.1409439+03:00 0HL7F48HB9FGG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:49.1419450+03:00 0HL7F48HB9FGG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:37:49.1429448+03:00 0HL7F48HB9FGG [INF] Request finished in 7.0263ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:37:50.3337358+03:00 0HL7F48HB9FGH [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:37:50.3377385+03:00 0HL7F48HB9FGH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:50.3377385+03:00 0HL7F48HB9FGH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:37:50.3387387+03:00 0HL7F48HB9FGH [ERR] Invalid reference token.
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Reference\",
  \"TokenHandle\": \"1e80ebd97186bd21314680c92fcab8d21dffd2319b4832691b31543c36e316e8\"
}" (c9724191)
2017-08-30T00:37:50.3387387+03:00 0HL7F48HB9FGH [INF] Success token introspection. Token status: "inactive", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:37:50.3387387+03:00 0HL7F48HB9FGH [INF] Request finished in 8.2847ms 200 application/json (15c52c40)
2017-08-30T00:37:52.3670858+03:00 0HL7F48HB9FGI [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.34227473059066751504042672360&state=15040426723600.7905169121862194   (e5be5b71)
2017-08-30T00:37:52.3720891+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:52.3730893+03:00 0HL7F48HB9FGI [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:37:52.3730893+03:00 0HL7F48HB9FGI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:52.3730893+03:00 0HL7F48HB9FGI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:37:52.3740904+03:00 0HL7F48HB9FGI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:52.3740904+03:00 0HL7F48HB9FGI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:52.3750926+03:00 0HL7F48HB9FGI [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040426723600.7905169121862194\",
  \"Nonce\": \"N0.34227473059066751504042672360\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.34227473059066751504042672360\",
    \"state\": \"15040426723600.7905169121862194\"
  }
}" (9a175e33)
2017-08-30T00:37:52.3870986+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:37:52.4071119+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:37:52.4161203+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:37:52.4191199+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:37:52.4221219+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:37:52.4241228+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:37:52.4291285+03:00 0HL7F48HB9FGI [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:37:52.4461378+03:00 0HL7F48HB9FGI [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040426723600.7905169121862194\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:37:52.4471385+03:00 0HL7F48HB9FGI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:52.4481396+03:00 0HL7F48HB9FGI [INF] Request finished in 81.9044ms 302  (15c52c40)
2017-08-30T00:37:55.6472635+03:00 0HL7F48HB9FGJ [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:37:55.6502655+03:00 0HL7F48HB9FGJ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:55.6522668+03:00 0HL7F48HB9FGJ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:37:55.6522668+03:00 0HL7F48HB9FGJ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:37:55.6522668+03:00 0HL7F48HB9FGJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:37:55.6532671+03:00 0HL7F48HB9FGJ [INF] Request finished in 7.0516ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:37:55.8053684+03:00 0HL7F48HB9FGK [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:37:55.8103722+03:00 0HL7F48HB9FGK [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:55.8103722+03:00 0HL7F48HB9FGK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:37:55.8183775+03:00 0HL7F48HB9FGK [INF] Request finished in 28.1828ms 200 application/json (15c52c40)
2017-08-30T00:37:55.9874905+03:00 0HL7F48HB9FGL [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:37:56.0265149+03:00 0HL7F48HB9FGL [INF] Request finished in 30.0325ms 204  (15c52c40)
2017-08-30T00:37:56.0915588+03:00 0HL7F48HB9FGM [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:37:56.1085693+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:56.1085693+03:00 0HL7F48HB9FGM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:37:56.1085693+03:00 0HL7F48HB9FGM [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:37:56.1345870+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:37:56.1666095+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:37:56.2476621+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:37:56.2716780+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (6ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:37:56.2836864+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:37:56.3517312+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:37:56.4257799+03:00 0HL7F48HB9FGM [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:37:56.4267806+03:00 0HL7F48HB9FGM [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:37:56.4548000+03:00 0HL7F48HB9FGM [INF] Request finished in 355.2761ms 200 application/json (15c52c40)
2017-08-30T00:37:59.4004144+03:00 0HL7F48HB9FGN [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:37:59.4074194+03:00 0HL7F48HB9FGN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:37:59.4074194+03:00 0HL7F48HB9FGN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:37:59.4329362+03:00 0HL7F48HB9FGN [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:37:59.4329362+03:00 0HL7F48HB9FGN [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:37:59.4339368+03:00 0HL7F48HB9FGN [INF] Request finished in 34.2412ms 200 application/json (15c52c40)
2017-08-30T00:38:04.2092701+03:00 0HL7F48HB9FGO [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:38:04.2202774+03:00 0HL7F48HB9FGO [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:38:04.2207780+03:00 0HL7F48HB9FGO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:38:04.2547998+03:00 0HL7F48HB9FGO [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:38:04.2553003+03:00 0HL7F48HB9FGO [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:38:04.2558012+03:00 0HL7F48HB9FGO [INF] Request finished in 46.9301ms 200 application/json (15c52c40)
2017-08-30T00:38:27.5708013+03:00 0HL7F48HB9FGP [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:38:27.5743038+03:00 0HL7F48HB9FGP [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:38:27.5743038+03:00 0HL7F48HB9FGP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:38:27.6018219+03:00 0HL7F48HB9FGP [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:38:27.6023220+03:00 0HL7F48HB9FGP [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:38:27.6123294+03:00 0HL7F48HB9FGP [INF] Request finished in 33.1892ms 200 application/json (15c52c40)
2017-08-30T00:38:30.5102526+03:00 0HL7F48HB9FGQ [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:38:30.5192586+03:00 0HL7F48HB9FGQ [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:38:30.5197595+03:00 0HL7F48HB9FGQ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:38:30.5417729+03:00 0HL7F48HB9FGQ [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:38:30.5417729+03:00 0HL7F48HB9FGQ [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:38:30.5427744+03:00 0HL7F48HB9FGQ [INF] Request finished in 32.7507ms 200 application/json (15c52c40)
2017-08-30T00:39:10.3913389+03:00 0HL7F48HB9FGR [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:39:10.3948415+03:00 0HL7F48HB9FGR [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:39:10.3948415+03:00 0HL7F48HB9FGR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:39:10.4208591+03:00 0HL7F48HB9FGR [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:39:10.4208591+03:00 0HL7F48HB9FGR [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:39:10.4218590+03:00 0HL7F48HB9FGR [INF] Request finished in 30.7936ms 200 application/json (15c52c40)
2017-08-30T00:39:13.6560910+03:00 0HL7F48HB9FGS [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:39:13.6590938+03:00 0HL7F48HB9FGS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:39:13.6590938+03:00 0HL7F48HB9FGS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:39:13.6801082+03:00 0HL7F48HB9FGS [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:39:13.6801082+03:00 0HL7F48HB9FGS [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:39:13.6806087+03:00 0HL7F48HB9FGS [INF] Request finished in 25.0848ms 200 application/json (15c52c40)
2017-08-30T00:39:45.5248007+03:00 0HL7F48HB9FGT [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:39:45.5323055+03:00 0HL7F48HB9FGT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:39:45.5328084+03:00 0HL7F48HB9FGT [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:39:45.5693305+03:00 0HL7F48HB9FGT [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:39:45.5698310+03:00 0HL7F48HB9FGT [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:39:45.5738337+03:00 0HL7F48HB9FGT [INF] Request finished in 46.252ms 200 application/json (15c52c40)
2017-08-30T00:39:49.5432137+03:00 0HL7F48HB9FGU [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:39:49.5467163+03:00 0HL7F48HB9FGU [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:39:49.5467163+03:00 0HL7F48HB9FGU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:39:49.5742347+03:00 0HL7F48HB9FGU [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:39:49.5742347+03:00 0HL7F48HB9FGU [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:39:49.5752350+03:00 0HL7F48HB9FGU [INF] Request finished in 31.9959ms 200 application/json (15c52c40)
2017-08-30T00:41:24.9776852+03:00 0HL7F48HB9FGV [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:41:24.9831895+03:00 0HL7F48HB9FGV [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:41:24.9841893+03:00 0HL7F48HB9FGV [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:41:24.9846899+03:00 0HL7F48HB9FGV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:41:24.9846899+03:00 0HL7F48HB9FGV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:41:24.9861903+03:00 0HL7F48HB9FGV [INF] Request finished in 10.0421ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:41:29.8473829+03:00 0HL7F48HB9FH0 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration   (e5be5b71)
2017-08-30T00:41:29.8493839+03:00 0HL7F48HB9FH0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:41:29.8493839+03:00 0HL7F48HB9FH0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration" (f7642de5)
2017-08-30T00:41:29.8513864+03:00 0HL7F48HB9FH0 [INF] Request finished in 4.0602ms 200 application/json (15c52c40)
2017-08-30T00:41:29.8989173+03:00 0HL7F48HB9FH1 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:41:29.9014192+03:00 0HL7F48HB9FH1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:41:29.9019193+03:00 0HL7F48HB9FH1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:41:29.9239343+03:00 0HL7F48HB9FH1 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:41:29.9249342+03:00 0HL7F48HB9FH1 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:41:29.9259349+03:00 0HL7F48HB9FH1 [INF] Request finished in 27.0068ms 200 application/json (15c52c40)
2017-08-30T00:41:32.2874984+03:00 0HL7F48HB9FH2 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:41:32.2925021+03:00 0HL7F48HB9FH2 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:41:32.2925021+03:00 0HL7F48HB9FH2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:41:32.3115151+03:00 0HL7F48HB9FH2 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:41:32.3120157+03:00 0HL7F48HB9FH2 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:41:32.3125158+03:00 0HL7F48HB9FH2 [INF] Request finished in 25.2029ms 200 application/json (15c52c40)
2017-08-30T00:42:34.6508074+03:00 0HL7F48HB9FH3 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:42:34.6548101+03:00 0HL7F48HB9FH3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:42:34.6553102+03:00 0HL7F48HB9FH3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:42:34.6743233+03:00 0HL7F48HB9FH3 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:42:34.6748262+03:00 0HL7F48HB9FH3 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:42:34.6753239+03:00 0HL7F48HB9FH3 [INF] Request finished in 25.062ms 200 application/json (15c52c40)
2017-08-30T00:42:37.4450152+03:00 0HL7F48HB9FH4 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:42:37.4485158+03:00 0HL7F48HB9FH4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:42:37.4485158+03:00 0HL7F48HB9FH4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:42:37.4705319+03:00 0HL7F48HB9FH4 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:42:37.4710317+03:00 0HL7F48HB9FH4 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:42:37.4715310+03:00 0HL7F48HB9FH4 [INF] Request finished in 28.2136ms 200 application/json (15c52c40)
2017-08-30T00:42:52.8952040+03:00 0HL7F48HB9FH5 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.119838949601412281504042972865&state=15040429728650.7138863989903839   (e5be5b71)
2017-08-30T00:42:52.8987058+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:42:52.8992067+03:00 0HL7F48HB9FH5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:42:52.8997068+03:00 0HL7F48HB9FH5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:52.8997068+03:00 0HL7F48HB9FH5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:42:52.9002073+03:00 0HL7F48HB9FH5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:52.9007079+03:00 0HL7F48HB9FH5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:52.9012072+03:00 0HL7F48HB9FH5 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040429728650.7138863989903839\",
  \"Nonce\": \"N0.119838949601412281504042972865\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.119838949601412281504042972865\",
    \"state\": \"15040429728650.7138863989903839\"
  }
}" (9a175e33)
2017-08-30T00:42:52.9047105+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:42:52.9212213+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:42:52.9257245+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:42:52.9332293+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (4ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:42:52.9372319+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:42:52.9392325+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:42:52.9442366+03:00 0HL7F48HB9FH5 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:42:52.9627491+03:00 0HL7F48HB9FH5 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040429728650.7138863989903839\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:42:52.9632492+03:00 0HL7F48HB9FH5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:52.9642503+03:00 0HL7F48HB9FH5 [INF] Request finished in 69.5432ms 302  (15c52c40)
2017-08-30T00:42:57.2057866+03:00 0HL7F48HB9FH6 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.26089607548874481504042977064&state=15040429770640.8441373945919279   (e5be5b71)
2017-08-30T00:42:57.2082880+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:42:57.2087889+03:00 0HL7F48HB9FH6 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:42:57.2087889+03:00 0HL7F48HB9FH6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:57.2092887+03:00 0HL7F48HB9FH6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:42:57.2092887+03:00 0HL7F48HB9FH6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:57.2102897+03:00 0HL7F48HB9FH6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:57.2102897+03:00 0HL7F48HB9FH6 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040429770640.8441373945919279\",
  \"Nonce\": \"N0.26089607548874481504042977064\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.26089607548874481504042977064\",
    \"state\": \"15040429770640.8441373945919279\"
  }
}" (9a175e33)
2017-08-30T00:42:57.2157940+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:42:57.2288018+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:42:57.2313037+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:42:57.2338052+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:42:57.2358065+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:42:57.2383079+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:42:57.2403097+03:00 0HL7F48HB9FH6 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:42:57.2613244+03:00 0HL7F48HB9FH6 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040429770640.8441373945919279\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:42:57.2623239+03:00 0HL7F48HB9FH6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:42:57.2628244+03:00 0HL7F48HB9FH6 [INF] Request finished in 57.6481ms 302  (15c52c40)
2017-08-30T00:43:01.3690512+03:00 0HL7F48HB9FH7 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:43:01.3720532+03:00 0HL7F48HB9FH7 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:43:01.3720532+03:00 0HL7F48HB9FH7 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:43:01.3730530+03:00 0HL7F48HB9FH7 [INF] Request finished in 4.046ms 200 application/json (15c52c40)
2017-08-30T00:46:47.9469591+03:00 0HL7F48HB9FH8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:46:48.3802464+03:00 0HL7F48HB9FH8 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:46:48.3807469+03:00 0HL7F48HB9FH8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:46:48.3817480+03:00 0HL7F48HB9FH8 [INF] Request finished in 434.7201ms 200 application/json (15c52c40)
2017-08-30T00:47:01.4199528+03:00 0HL7F48HB9FH9 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:47:01.4224547+03:00 0HL7F48HB9FH9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:47:01.4229548+03:00 0HL7F48HB9FH9 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:47:01.4229548+03:00 0HL7F48HB9FH9 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:01.4234557+03:00 0HL7F48HB9FH9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:47:01.4239559+03:00 0HL7F48HB9FH9 [INF] Request finished in 4.4708ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:47:28.8175900+03:00 0HL7F48HB9FHA [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.44809547354221911504043248807&state=15040432488070.006748556246541693   (e5be5b71)
2017-08-30T00:47:28.8421057+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:47:28.8431059+03:00 0HL7F48HB9FHA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:47:28.8441074+03:00 0HL7F48HB9FHA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:28.8446079+03:00 0HL7F48HB9FHA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T00:47:28.8451076+03:00 0HL7F48HB9FHA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:28.8461083+03:00 0HL7F48HB9FHA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:28.8461083+03:00 0HL7F48HB9FHA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15040432488070.006748556246541693\",
  \"Nonce\": \"N0.44809547354221911504043248807\",
  \"SessionId\": \"386e171cb9a19358b9e01715ffb9ff2a\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.44809547354221911504043248807\",
    \"state\": \"15040432488070.006748556246541693\"
  }
}" (9a175e33)
2017-08-30T00:47:28.9601837+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (110ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:47:28.9761943+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:47:28.9806971+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:47:28.9852003+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:47:28.9892033+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:47:28.9932060+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:47:28.9987094+03:00 0HL7F48HB9FHA [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:47:29.0172215+03:00 0HL7F48HB9FHA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15040432488070.006748556246541693\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T00:47:29.0177228+03:00 0HL7F48HB9FHA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:29.0192236+03:00 0HL7F48HB9FHA [INF] Request finished in 202.8467ms 302  (15c52c40)
2017-08-30T00:47:35.9995668+03:00 0HL7F48HB9FHB [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T00:47:36.0035703+03:00 0HL7F48HB9FHB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:47:36.0040708+03:00 0HL7F48HB9FHB [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T00:47:36.0045713+03:00 0HL7F48HB9FHB [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T00:47:36.0045713+03:00 0HL7F48HB9FHB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T00:47:36.0055712+03:00 0HL7F48HB9FHB [INF] Request finished in 6.165ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T00:47:36.4818870+03:00 0HL7F48HB9FHC [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T00:47:36.4843897+03:00 0HL7F48HB9FHC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:47:36.4843897+03:00 0HL7F48HB9FHC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T00:47:36.4853891+03:00 0HL7F48HB9FHC [INF] Request finished in 3.9016ms 200 application/json (15c52c40)
2017-08-30T00:47:36.7085377+03:00 0HL7F48HB9FHD [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T00:47:36.7090378+03:00 0HL7F48HB9FHD [INF] Request finished in 4.5912ms 204  (15c52c40)
2017-08-30T00:47:36.9056686+03:00 0HL7F48HB9FHE [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T00:47:36.9141744+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:47:36.9141744+03:00 0HL7F48HB9FHE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T00:47:36.9141744+03:00 0HL7F48HB9FHE [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T00:47:36.9987311+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (6ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:47:37.0667751+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:47:37.0687772+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T00:47:37.0757815+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T00:47:37.0812850+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T00:47:37.0912920+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T00:47:37.0972960+03:00 0HL7F48HB9FHE [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T00:47:37.0972960+03:00 0HL7F48HB9FHE [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T00:47:37.0982967+03:00 0HL7F48HB9FHE [INF] Request finished in 340.7307ms 200 application/json (15c52c40)
2017-08-30T00:48:15.9761856+03:00 0HL7F48HB9FHF [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T00:48:15.9786879+03:00 0HL7F48HB9FHF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T00:48:15.9791888+03:00 0HL7F48HB9FHF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T00:48:15.9977013+03:00 0HL7F48HB9FHF [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T00:48:15.9982010+03:00 0HL7F48HB9FHF [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T00:48:15.9992013+03:00 0HL7F48HB9FHF [INF] Request finished in 23.0433ms 200 application/json (15c52c40)
2017-08-30T01:40:18.1059104+03:00 0HL7F48HB9FHG [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T01:40:23.4921048+03:00 0HL7F48HB9FHG [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T01:40:23.4926054+03:00 0HL7F48HB9FHG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T01:40:23.4961095+03:00 0HL7F48HB9FHG [ERR] Invalid reference token.
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Reference\",
  \"TokenHandle\": \"49d146655742d771e435cb3a2235ef62c07964f4259d0072c6e92c15b6dfce0b\"
}" (c9724191)
2017-08-30T01:40:23.4961095+03:00 0HL7F48HB9FHG [INF] Success token introspection. Token status: "inactive", for API name: "fso.Api" (c4bc8338)
2017-08-30T01:40:23.4976095+03:00 0HL7F48HB9FHG [INF] Request finished in 5395.9125ms 200 application/json (15c52c40)
2017-08-30T16:55:37.4604253+03:00  [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation. (553c312b)
2017-08-30T16:55:39.0454773+03:00  [INF] Executed DbCommand (1,169ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE') SELECT 1 ELSE SELECT 0 (6438bdd5)
2017-08-30T16:55:40.5346522+03:00  [INF] Executed DbCommand (575ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T16:55:40.6647383+03:00  [WRN] Role "2028bfee-c042-4a9f-81d8-4dd23b3704cc" validation failed: "DuplicateRoleName". (60d773c7)
2017-08-30T16:55:40.8298480+03:00  [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T16:55:40.8633701+03:00  [WRN] User "05e19f1b-dd95-4e2c-beab-553a37fef720" validation failed: "DuplicateUserName". (5dc28e15)
2017-08-30T16:55:40.8728762+03:00  [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T16:55:40.9073994+03:00  [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T16:55:40.9564323+03:00  [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450), @__get_Item_1='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[UserId], [e].[RoleId]
FROM [AspNetUserRoles] AS [e]
WHERE ([e].[UserId] = @__get_Item_0) AND ([e].[RoleId] = @__get_Item_1) (6438bdd5)
2017-08-30T16:55:41.0064656+03:00  [WRN] User "3c7cca64-00cd-49cc-9407-3128eae83098" is already in role "fso.api.user". (337e5c15)
2017-08-30T16:58:35.6894809+03:00 0HL7FLSQJ74C6 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T16:58:35.8801082+03:00 0HL7FLSQJ74C6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T16:58:36.0397145+03:00 0HL7FLSQJ74C6 [INF] Request finished in 380.0115ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T17:01:13.3684186+03:00 0HL7FLSQJ74C7 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635   (e5be5b71)
2017-08-30T17:01:13.3914343+03:00 0HL7FLSQJ74C7 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:13.3979380+03:00 0HL7FLSQJ74C7 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:01:13.6916346+03:00 0HL7FLSQJ74C7 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041016733620.10904767627609635\",
  \"Nonce\": \"N0.258679769771477551504101673362\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.258679769771477551504101673362\",
    \"state\": \"15041016733620.10904767627609635\"
  }
}" (9a175e33)
2017-08-30T17:01:13.6976386+03:00 0HL7FLSQJ74C7 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-08-30T17:01:13.7136477+03:00 0HL7FLSQJ74C7 [INF] Request finished in 345.7122ms 302  (15c52c40)
2017-08-30T17:01:13.8598822+03:00 0HL7FLSQJ74C8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.258679769771477551504101673362%26state%3D15041016733620.10904767627609635   (e5be5b71)
2017-08-30T17:01:14.3607153+03:00 0HL7FLSQJ74C8 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:14.5613488+03:00 0HL7FLSQJ74C8 [INF] Executing action method "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" with arguments (["/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T17:01:17.6458989+03:00 0HL7FLSQJ74C8 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-08-30T17:01:18.6785857+03:00 0HL7FLSQJ74C8 [INF] Executed action "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" in 4440.0171ms (afa2e885)
2017-08-30T17:01:18.6815873+03:00 0HL7FLSQJ74C8 [INF] Request finished in 4825.1168ms 200 text/html; charset=utf-8 (15c52c40)
2017-08-30T17:01:18.7061034+03:00 0HL7FLSQJ74C9 [INF] Request starting HTTP/1.1 GET http://localhost:5000/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU   (e5be5b71)
2017-08-30T17:01:18.7071045+03:00 0HL7FLSQJ74CA [INF] Request starting HTTP/1.1 GET http://localhost:5000/css/site.min.css?v=G7OG5flN0NdPJ13sNYOv3Hwkc-gAxRfBTYgtu6Sl0yk   (e5be5b71)
2017-08-30T17:01:18.7296200+03:00 0HL7FLSQJ74CA [INF] Sending file. Request path: '"/css/site.min.css"'. Physical path: '"C:\Users\okana\Documents\Visual Studio 2017\Projects\fso.Web\fso.IdentityProvider\wwwroot\css\site.min.css"' (27b0a520)
2017-08-30T17:01:18.7296200+03:00 0HL7FLSQJ74C9 [INF] Sending file. Request path: '"/js/site.min.js"'. Physical path: '"C:\Users\okana\Documents\Visual Studio 2017\Projects\fso.Web\fso.IdentityProvider\wwwroot\js\site.min.js"' (27b0a520)
2017-08-30T17:01:18.7496333+03:00 0HL7FLSQJ74C9 [INF] Request finished in 44.4421ms 200 application/javascript (15c52c40)
2017-08-30T17:01:18.7571377+03:00 0HL7FLSQJ74CA [INF] Request finished in 52.2343ms 200 text/css (15c52c40)
2017-08-30T17:01:24.1405058+03:00 0HL7FLSQJ74CB [INF] Request starting HTTP/1.1 POST http://localhost:5000/Account/Login?returnurl=%2Fconnect%2Fauthorize%2Flogin%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.258679769771477551504101673362%26state%3D15041016733620.10904767627609635 application/x-www-form-urlencoded 252 (e5be5b71)
2017-08-30T17:01:24.2145562+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:24.2750958+03:00 0HL7FLSQJ74CB [INF] Executing action method "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" with arguments (["fso.IdentityProvider.Models.AccountViewModels.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T17:01:24.3286308+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Active], [u].[BirthDate], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[Locale], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[Name], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[PictureUrl], [u].[ProfilePageUrl], [u].[RegisterTime], [u].[SecurityStamp], [u].[Status], [u].[Surname], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0 (6438bdd5)
2017-08-30T17:01:24.6483435+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (50ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:01:24.6523458+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:01:24.6968760+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:01:24.7318997+03:00 0HL7FLSQJ74CB [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:01:24.7834337+03:00 0HL7FLSQJ74CB [INF] AuthenticationScheme: "Identity.Application" signed in. (c66dd7e7)
2017-08-30T17:01:24.7839339+03:00 0HL7FLSQJ74CB [INF] User logged in. (fdce0db4)
2017-08-30T17:01:24.7909377+03:00 0HL7FLSQJ74CB [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635". (d98d540e)
2017-08-30T17:01:24.7934408+03:00 0HL7FLSQJ74CB [INF] Executed action "IdentityServerWithAspNetIdentity.Controllers.AccountController.Login (fso.IdentityProvider)" in 645.065ms (afa2e885)
2017-08-30T17:01:24.7949416+03:00 0HL7FLSQJ74CB [INF] Request finished in 655.0342ms 302  (15c52c40)
2017-08-30T17:01:24.7979432+03:00 0HL7FLSQJ74CC [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/login?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635   (e5be5b71)
2017-08-30T17:01:24.8099512+03:00 0HL7FLSQJ74CC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:24.8214590+03:00 0HL7FLSQJ74CC [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:01:24.8229606+03:00 0HL7FLSQJ74CC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:24.8234599+03:00 0HL7FLSQJ74CC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-08-30T17:01:24.8294639+03:00 0HL7FLSQJ74CC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:24.8314653+03:00 0HL7FLSQJ74CC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:24.8314653+03:00 0HL7FLSQJ74CC [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041016733620.10904767627609635\",
  \"Nonce\": \"N0.258679769771477551504101673362\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.258679769771477551504101673362\",
    \"state\": \"15041016733620.10904767627609635\"
  }
}" (9a175e33)
2017-08-30T17:01:24.8594839+03:00 0HL7FLSQJ74CC [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:01:24.8784973+03:00 0HL7FLSQJ74CC [INF] Showing consent: User has not yet consented (07b81e7e)
2017-08-30T17:01:24.8814985+03:00 0HL7FLSQJ74CC [INF] Request finished in 83.5991ms 302  (15c52c40)
2017-08-30T17:01:24.8880034+03:00 0HL7FLSQJ74CD [INF] Request starting HTTP/1.1 GET http://localhost:5000/consent?returnUrl=%2Fconnect%2Fauthorize%2Fconsent%3Fresponse_type%3Did_token%2520token%26client_id%3Dfso.AngularClient%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A65271%26scope%3Dopenid%2520email%2520profile%2520fso.Api%26nonce%3DN0.258679769771477551504101673362%26state%3D15041016733620.10904767627609635   (e5be5b71)
2017-08-30T17:01:24.8935069+03:00 0HL7FLSQJ74CD [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:24.9075162+03:00 0HL7FLSQJ74CD [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:01:24.9090166+03:00 0HL7FLSQJ74CD [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:24.9325328+03:00 0HL7FLSQJ74CD [INF] Executing action method "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" with arguments (["/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T17:01:24.9410379+03:00 0HL7FLSQJ74CD [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:24.9425391+03:00 0HL7FLSQJ74CD [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:25.1076488+03:00 0HL7FLSQJ74CD [INF] Executing ViewResult, running view at path "/Views/Consent/Index.cshtml". (9707eebe)
2017-08-30T17:01:25.3117845+03:00 0HL7FLSQJ74CD [INF] Executed action "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" in 396.2073ms (afa2e885)
2017-08-30T17:01:25.3127852+03:00 0HL7FLSQJ74CD [INF] Request finished in 428.3352ms 200 text/html; charset=utf-8 (15c52c40)
2017-08-30T17:01:35.9377426+03:00 0HL7FLSQJ74CE [INF] Request starting HTTP/1.1 POST http://localhost:5000/consent application/x-www-form-urlencoded 678 (e5be5b71)
2017-08-30T17:01:35.9407442+03:00 0HL7FLSQJ74CE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:35.9412443+03:00 0HL7FLSQJ74CE [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:01:35.9417457+03:00 0HL7FLSQJ74CE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:35.9647610+03:00 0HL7FLSQJ74CE [INF] Executing action method "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" with arguments (["fso.IdentityProvider.Models.ConsentInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-08-30T17:01:35.9672628+03:00 0HL7FLSQJ74CE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:35.9682623+03:00 0HL7FLSQJ74CE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:35.9742683+03:00 0HL7FLSQJ74CE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:35.9967822+03:00 0HL7FLSQJ74CE [INF] Executing RedirectResult, redirecting to "/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635". (d98d540e)
2017-08-30T17:01:35.9972828+03:00 0HL7FLSQJ74CE [INF] Executed action "fso.IdentityProvider.Controllers.ConsentController.Index (fso.IdentityProvider)" in 54.3102ms (afa2e885)
2017-08-30T17:01:35.9977821+03:00 0HL7FLSQJ74CE [INF] Request finished in 60.5459ms 302  (15c52c40)
2017-08-30T17:01:36.0002856+03:00 0HL7FLSQJ74CF [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize/consent?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http%3A%2F%2Flocalhost%3A65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.258679769771477551504101673362&state=15041016733620.10904767627609635   (e5be5b71)
2017-08-30T17:01:36.0022853+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:36.0032864+03:00 0HL7FLSQJ74CF [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:01:36.0042886+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:36.0042886+03:00 0HL7FLSQJ74CF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/consent" (f7642de5)
2017-08-30T17:01:36.0107923+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:36.0923460+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:36.0928469+03:00 0HL7FLSQJ74CF [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041016733620.10904767627609635\",
  \"Nonce\": \"N0.258679769771477551504101673362\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.258679769771477551504101673362\",
    \"state\": \"15041016733620.10904767627609635\"
  }
}" (9a175e33)
2017-08-30T17:01:36.0988505+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:01:36.1103571+03:00 0HL7FLSQJ74CF [INF] User consented to scopes: ["openid", "email", "profile", "fso.Api"] (0f706f38)
2017-08-30T17:01:36.1713977+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:01:36.1749002+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:01:36.1769012+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:01:36.1794026+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:01:36.1814056+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:01:36.1869098+03:00 0HL7FLSQJ74CF [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:01:36.4883788+03:00 0HL7FLSQJ74CF [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041016733620.10904767627609635\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:01:36.5004918+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:36.5079998+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:36.5110021+03:00 0HL7FLSQJ74CF [INF] AuthenticationScheme: "Identity.Application" signed in. (c66dd7e7)
2017-08-30T17:01:36.5190067+03:00 0HL7FLSQJ74CF [INF] Request finished in 518.7866ms 302  (15c52c40)
2017-08-30T17:01:43.5059751+03:00 0HL7FLSQJ74CG [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/checksession   (e5be5b71)
2017-08-30T17:01:43.5089771+03:00 0HL7FLSQJ74CG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:43.5099774+03:00 0HL7FLSQJ74CG [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:01:43.5109777+03:00 0HL7FLSQJ74CG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:01:43.5109777+03:00 0HL7FLSQJ74CG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession" (f7642de5)
2017-08-30T17:01:43.5124797+03:00 0HL7FLSQJ74CG [INF] Request finished in 5.773ms 200 text/html; charset=UTF-8 (15c52c40)
2017-08-30T17:01:43.5344943+03:00 0HL7FLSQJ74CH [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:01:43.5520053+03:00 0HL7FLSQJ74CH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:43.5530068+03:00 0HL7FLSQJ74CH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:01:43.5900310+03:00 0HL7FLSQJ74CH [INF] Request finished in 55.0468ms 200 application/json (15c52c40)
2017-08-30T17:01:43.6635797+03:00 0HL7FLSQJ74CI [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T17:01:43.6790902+03:00 0HL7FLSQJ74CI [INF] Request finished in 15.5326ms 204  (15c52c40)
2017-08-30T17:01:43.7401328+03:00 0HL7FLSQJ74CJ [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T17:01:43.7466353+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:43.7481361+03:00 0HL7FLSQJ74CJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T17:01:43.7626467+03:00 0HL7FLSQJ74CJ [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T17:01:43.8452002+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:01:43.8687164+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:01:43.8717180+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:01:43.8777216+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:01:43.8802235+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:01:43.8827254+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:01:43.8857278+03:00 0HL7FLSQJ74CJ [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:01:43.8867308+03:00 0HL7FLSQJ74CJ [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T17:01:43.8952339+03:00 0HL7FLSQJ74CJ [INF] Request finished in 165.705ms 200 application/json (15c52c40)
2017-08-30T17:01:45.5799545+03:00 0HL7FLSQJ74CK [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration   (e5be5b71)
2017-08-30T17:01:45.5839568+03:00 0HL7FLSQJ74CK [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:45.5844573+03:00 0HL7FLSQJ74CK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration" (f7642de5)
2017-08-30T17:01:45.6344905+03:00 0HL7FLSQJ74CK [INF] Request finished in 54.8111ms 200 application/json (15c52c40)
2017-08-30T17:01:45.7755839+03:00 0HL7FLSQJ74CL [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:01:45.7810878+03:00 0HL7FLSQJ74CL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:45.7825898+03:00 0HL7FLSQJ74CL [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:01:45.8561381+03:00 0HL7FLSQJ74CL [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:01:45.8616411+03:00 0HL7FLSQJ74CL [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:01:45.8636421+03:00 0HL7FLSQJ74CL [INF] Request finished in 87.9985ms 200 application/json (15c52c40)
2017-08-30T17:01:52.9348271+03:00 0HL7FLSQJ74CM [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:01:52.9378291+03:00 0HL7FLSQJ74CM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:01:52.9378291+03:00 0HL7FLSQJ74CM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:01:52.9628457+03:00 0HL7FLSQJ74CM [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:01:52.9633462+03:00 0HL7FLSQJ74CM [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:01:52.9643465+03:00 0HL7FLSQJ74CM [INF] Request finished in 29.8063ms 200 application/json (15c52c40)
2017-08-30T17:02:14.9131089+03:00 0HL7FLSQJ74CN [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:02:14.9181142+03:00 0HL7FLSQJ74CN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:02:14.9181142+03:00 0HL7FLSQJ74CN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:02:14.9396271+03:00 0HL7FLSQJ74CN [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:02:14.9401272+03:00 0HL7FLSQJ74CN [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:02:14.9416300+03:00 0HL7FLSQJ74CN [INF] Request finished in 28.2511ms 200 application/json (15c52c40)
2017-08-30T17:02:19.5781888+03:00 0HL7FLSQJ74CO [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:02:19.5811904+03:00 0HL7FLSQJ74CO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:02:19.5811904+03:00 0HL7FLSQJ74CO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:02:19.6032062+03:00 0HL7FLSQJ74CO [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:02:19.6037068+03:00 0HL7FLSQJ74CO [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:02:19.6052072+03:00 0HL7FLSQJ74CO [INF] Request finished in 26.9173ms 200 application/json (15c52c40)
2017-08-30T17:02:41.3517874+03:00 0HL7FLSQJ74CP [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:02:41.3557909+03:00 0HL7FLSQJ74CP [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:02:41.3557909+03:00 0HL7FLSQJ74CP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:02:41.4013202+03:00 0HL7FLSQJ74CP [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:02:41.4018203+03:00 0HL7FLSQJ74CP [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:02:41.4028214+03:00 0HL7FLSQJ74CP [INF] Request finished in 51.9043ms 200 application/json (15c52c40)
2017-08-30T17:03:00.5253272+03:00 0HL7FLSQJ74CQ [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:03:00.5298308+03:00 0HL7FLSQJ74CQ [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:03:00.5298308+03:00 0HL7FLSQJ74CQ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:03:00.5518455+03:00 0HL7FLSQJ74CQ [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:03:00.5523460+03:00 0HL7FLSQJ74CQ [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:03:00.5533467+03:00 0HL7FLSQJ74CQ [INF] Request finished in 28.3904ms 200 application/json (15c52c40)
2017-08-30T17:06:36.2166708+03:00 0HL7FLSQJ74CR [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.447539295136844431504101996162&state=15041019961620.7157360246835183   (e5be5b71)
2017-08-30T17:06:36.2486917+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:36.2496916+03:00 0HL7FLSQJ74CR [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:06:36.2501917+03:00 0HL7FLSQJ74CR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:36.2506926+03:00 0HL7FLSQJ74CR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:06:36.2511932+03:00 0HL7FLSQJ74CR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:36.2521934+03:00 0HL7FLSQJ74CR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:36.2526940+03:00 0HL7FLSQJ74CR [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041019961620.7157360246835183\",
  \"Nonce\": \"N0.447539295136844431504101996162\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.447539295136844431504101996162\",
    \"state\": \"15041019961620.7157360246835183\"
  }
}" (9a175e33)
2017-08-30T17:06:36.2627006+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:06:36.2772101+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:36.2792110+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:06:36.2817129+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:06:36.2832137+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:06:36.2862160+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:36.2887183+03:00 0HL7FLSQJ74CR [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:06:36.3007251+03:00 0HL7FLSQJ74CR [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041019961620.7157360246835183\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:06:36.3012260+03:00 0HL7FLSQJ74CR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:36.3037275+03:00 0HL7FLSQJ74CR [INF] Request finished in 89.2182ms 302  (15c52c40)
2017-08-30T17:06:41.1757927+03:00 0HL7FLSQJ74CS [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.56873730527937671504102000685&state=15041020006850.7413699729609682   (e5be5b71)
2017-08-30T17:06:41.1792941+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:41.1802948+03:00 0HL7FLSQJ74CS [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:06:41.1807949+03:00 0HL7FLSQJ74CS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:41.1812958+03:00 0HL7FLSQJ74CS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:06:41.1822961+03:00 0HL7FLSQJ74CS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:41.1832967+03:00 0HL7FLSQJ74CS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:41.1832967+03:00 0HL7FLSQJ74CS [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041020006850.7413699729609682\",
  \"Nonce\": \"N0.56873730527937671504102000685\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.56873730527937671504102000685\",
    \"state\": \"15041020006850.7413699729609682\"
  }
}" (9a175e33)
2017-08-30T17:06:41.1883005+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:06:41.2048109+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:41.2148179+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:06:41.2178195+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:06:41.2203214+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:06:41.2288268+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:41.2313287+03:00 0HL7FLSQJ74CS [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:06:41.2588476+03:00 0HL7FLSQJ74CS [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041020006850.7413699729609682\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:06:41.2608485+03:00 0HL7FLSQJ74CS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:41.2623509+03:00 0HL7FLSQJ74CS [INF] Request finished in 88.3597ms 302  (15c52c40)
2017-08-30T17:06:44.2273205+03:00 0HL7FLSQJ74CT [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.72699456631907671504102004137&state=15041020041370.32035412325428636   (e5be5b71)
2017-08-30T17:06:44.2323234+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:44.2333241+03:00 0HL7FLSQJ74CT [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:06:44.2338250+03:00 0HL7FLSQJ74CT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:44.2338250+03:00 0HL7FLSQJ74CT [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:06:44.2348249+03:00 0HL7FLSQJ74CT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:44.2358255+03:00 0HL7FLSQJ74CT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:44.2358255+03:00 0HL7FLSQJ74CT [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041020041370.32035412325428636\",
  \"Nonce\": \"N0.72699456631907671504102004137\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.72699456631907671504102004137\",
    \"state\": \"15041020041370.32035412325428636\"
  }
}" (9a175e33)
2017-08-30T17:06:44.2468329+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:06:44.2613431+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:44.2648448+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:06:44.2688479+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:06:44.2713494+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:06:44.2763531+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:44.2788569+03:00 0HL7FLSQJ74CT [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:06:44.2993680+03:00 0HL7FLSQJ74CT [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041020041370.32035412325428636\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:06:44.2998685+03:00 0HL7FLSQJ74CT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:44.3018706+03:00 0HL7FLSQJ74CT [INF] Request finished in 74.6267ms 302  (15c52c40)
2017-08-30T17:06:50.3198700+03:00 0HL7FLSQJ74CU [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:06:50.3228720+03:00 0HL7FLSQJ74CU [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:50.3228720+03:00 0HL7FLSQJ74CU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:06:50.3248733+03:00 0HL7FLSQJ74CU [INF] Request finished in 5.2295ms 200 application/json (15c52c40)
2017-08-30T17:06:50.4944858+03:00 0HL7FLSQJ74CV [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.85613146753692271504102010393&state=15041020103930.9056535214796557   (e5be5b71)
2017-08-30T17:06:50.4979884+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:50.4989886+03:00 0HL7FLSQJ74CV [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:06:50.4994896+03:00 0HL7FLSQJ74CV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:50.4999901+03:00 0HL7FLSQJ74CV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:06:50.5004906+03:00 0HL7FLSQJ74CV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:50.5019918+03:00 0HL7FLSQJ74CV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:50.5019918+03:00 0HL7FLSQJ74CV [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041020103930.9056535214796557\",
  \"Nonce\": \"N0.85613146753692271504102010393\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.85613146753692271504102010393\",
    \"state\": \"15041020103930.9056535214796557\"
  }
}" (9a175e33)
2017-08-30T17:06:50.5154998+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (8ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:06:50.5285092+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:50.5400163+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:06:50.5435184+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:06:50.5665337+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (20ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:06:50.5995561+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:50.6455871+03:00 0HL7FLSQJ74CV [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:06:50.6711030+03:00 0HL7FLSQJ74CV [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041020103930.9056535214796557\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:06:50.6736057+03:00 0HL7FLSQJ74CV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:06:50.6811101+03:00 0HL7FLSQJ74CV [INF] Request finished in 186.1323ms 302  (15c52c40)
2017-08-30T17:06:55.7109540+03:00 0HL7FLSQJ74D0 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:06:55.7144553+03:00 0HL7FLSQJ74D0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:55.7144553+03:00 0HL7FLSQJ74D0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:06:55.7159565+03:00 0HL7FLSQJ74D0 [INF] Request finished in 4.8174ms 200 application/json (15c52c40)
2017-08-30T17:06:56.1292312+03:00 0HL7FLSQJ74D1 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T17:06:56.1307324+03:00 0HL7FLSQJ74D1 [INF] Request finished in 1.3176ms 204  (15c52c40)
2017-08-30T17:06:56.2353017+03:00 0HL7FLSQJ74D2 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T17:06:56.2388046+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:06:56.2393052+03:00 0HL7FLSQJ74D2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T17:06:56.2393052+03:00 0HL7FLSQJ74D2 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T17:06:56.2643210+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:06:56.2683233+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:56.2728273+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:06:56.2828331+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (5ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:06:56.2863360+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:06:56.2918395+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:06:56.2953420+03:00 0HL7FLSQJ74D2 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:06:56.2953420+03:00 0HL7FLSQJ74D2 [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T17:06:56.2968432+03:00 0HL7FLSQJ74D2 [INF] Request finished in 61.1637ms 200 application/json (15c52c40)
2017-08-30T17:11:50.1411674+03:00 0HL7FLSQJ74D3 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.64302403925695681504102310113&state=15041023101130.4235528190298814   (e5be5b71)
2017-08-30T17:11:51.0196866+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:11:51.0201864+03:00 0HL7FLSQJ74D3 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:11:51.0211890+03:00 0HL7FLSQJ74D3 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:51.0211890+03:00 0HL7FLSQJ74D3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:11:51.0216883+03:00 0HL7FLSQJ74D3 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:51.0226886+03:00 0HL7FLSQJ74D3 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:51.0226886+03:00 0HL7FLSQJ74D3 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041023101130.4235528190298814\",
  \"Nonce\": \"N0.64302403925695681504102310113\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.64302403925695681504102310113\",
    \"state\": \"15041023101130.4235528190298814\"
  }
}" (9a175e33)
2017-08-30T17:11:51.1127481+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (83ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:11:51.1692863+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:51.1782922+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:11:51.1857966+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:11:51.2058111+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:11:51.2148167+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:51.2223215+03:00 0HL7FLSQJ74D3 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:11:51.2588460+03:00 0HL7FLSQJ74D3 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041023101130.4235528190298814\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:11:51.2598466+03:00 0HL7FLSQJ74D3 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:51.2678524+03:00 0HL7FLSQJ74D3 [INF] Request finished in 1121.8545ms 302  (15c52c40)
2017-08-30T17:11:53.1516043+03:00 0HL7FLSQJ74D4 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.28163092306530891504102313113&state=15041023131130.6897311413181517   (e5be5b71)
2017-08-30T17:11:53.1551060+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:11:53.1561067+03:00 0HL7FLSQJ74D4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:11:53.1571093+03:00 0HL7FLSQJ74D4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.1576087+03:00 0HL7FLSQJ74D4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:11:53.1581088+03:00 0HL7FLSQJ74D4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.1801226+03:00 0HL7FLSQJ74D4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.1801226+03:00 0HL7FLSQJ74D4 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041023131130.6897311413181517\",
  \"Nonce\": \"N0.28163092306530891504102313113\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.28163092306530891504102313113\",
    \"state\": \"15041023131130.6897311413181517\"
  }
}" (9a175e33)
2017-08-30T17:11:53.1891286+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:11:53.2301555+03:00 0HL7FLSQJ74D5 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.77484285715037431504102313160&state=15041023131600.41991818636823597   (e5be5b71)
2017-08-30T17:11:53.2311566+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:53.2476681+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:11:53.3077076+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (57ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:11:53.3112094+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:11:53.3122104+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:11:53.3132111+03:00 0HL7FLSQJ74D5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:11:53.3162135+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:53.3217166+03:00 0HL7FLSQJ74D5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.3222175+03:00 0HL7FLSQJ74D5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:11:53.3312231+03:00 0HL7FLSQJ74D4 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:11:53.3342251+03:00 0HL7FLSQJ74D5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.3452324+03:00 0HL7FLSQJ74D5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.3452324+03:00 0HL7FLSQJ74D5 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041023131600.41991818636823597\",
  \"Nonce\": \"N0.77484285715037431504102313160\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.77484285715037431504102313160\",
    \"state\": \"15041023131600.41991818636823597\"
  }
}" (9a175e33)
2017-08-30T17:11:53.3492347+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:11:53.3557396+03:00 0HL7FLSQJ74D4 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041023131130.6897311413181517\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:11:53.3682481+03:00 0HL7FLSQJ74D4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.3742529+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:53.3767531+03:00 0HL7FLSQJ74D4 [INF] Request finished in 221.5535ms 302  (15c52c40)
2017-08-30T17:11:53.3777542+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:11:53.3827571+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:11:53.3847585+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:11:53.3882614+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:53.3927642+03:00 0HL7FLSQJ74D5 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:11:53.4137782+03:00 0HL7FLSQJ74D5 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041023131600.41991818636823597\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:11:53.4142783+03:00 0HL7FLSQJ74D5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:53.4152801+03:00 0HL7FLSQJ74D5 [INF] Request finished in 210.6646ms 302  (15c52c40)
2017-08-30T17:11:56.2256472+03:00 0HL7FLSQJ74D6 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.54048459086582891504102316161&state=15041023161610.10775959351702613   (e5be5b71)
2017-08-30T17:11:56.2456601+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:11:56.2461606+03:00 0HL7FLSQJ74D6 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:11:56.2466612+03:00 0HL7FLSQJ74D6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:56.2471613+03:00 0HL7FLSQJ74D6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:11:56.2476622+03:00 0HL7FLSQJ74D6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:56.2481620+03:00 0HL7FLSQJ74D6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:56.2481620+03:00 0HL7FLSQJ74D6 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041023161610.10775959351702613\",
  \"Nonce\": \"N0.54048459086582891504102316161\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.54048459086582891504102316161\",
    \"state\": \"15041023161610.10775959351702613\"
  }
}" (9a175e33)
2017-08-30T17:11:56.2646731+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (12ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:11:56.2816844+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:56.2881890+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:11:56.3047001+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (8ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:11:56.3107037+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:11:56.3142059+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:56.3187086+03:00 0HL7FLSQJ74D6 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:11:56.3472278+03:00 0HL7FLSQJ74D6 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041023161610.10775959351702613\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:11:56.3482289+03:00 0HL7FLSQJ74D6 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:56.3532318+03:00 0HL7FLSQJ74D6 [INF] Request finished in 143.3623ms 302  (15c52c40)
2017-08-30T17:11:59.2541608+03:00 0HL7FLSQJ74D7 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.88131342107429391504102319164&state=15041023191640.17470006764472612   (e5be5b71)
2017-08-30T17:11:59.2911846+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:11:59.2931871+03:00 0HL7FLSQJ74D7 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:11:59.2936865+03:00 0HL7FLSQJ74D7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:59.2941874+03:00 0HL7FLSQJ74D7 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:11:59.2946868+03:00 0HL7FLSQJ74D7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:59.2956874+03:00 0HL7FLSQJ74D7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:59.2956874+03:00 0HL7FLSQJ74D7 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041023191640.17470006764472612\",
  \"Nonce\": \"N0.88131342107429391504102319164\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.88131342107429391504102319164\",
    \"state\": \"15041023191640.17470006764472612\"
  }
}" (9a175e33)
2017-08-30T17:11:59.3006908+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:11:59.3157007+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:59.3202039+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:11:59.3237064+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:11:59.3297104+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:11:59.3437198+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:11:59.3532259+03:00 0HL7FLSQJ74D7 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:11:59.3762408+03:00 0HL7FLSQJ74D7 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041023191640.17470006764472612\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:11:59.3807448+03:00 0HL7FLSQJ74D7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:11:59.4192698+03:00 0HL7FLSQJ74D7 [INF] Request finished in 179.5852ms 302  (15c52c40)
2017-08-30T17:12:03.2796330+03:00 0HL7FLSQJ74D8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:12:03.2911408+03:00 0HL7FLSQJ74D8 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:12:03.2911408+03:00 0HL7FLSQJ74D8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:12:03.3026487+03:00 0HL7FLSQJ74D8 [INF] Request finished in 19.3209ms 200 application/json (15c52c40)
2017-08-30T17:12:04.6965748+03:00 0HL7FLSQJ74D9 [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:12:04.6995772+03:00 0HL7FLSQJ74D9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:12:04.6995772+03:00 0HL7FLSQJ74D9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:12:04.7250944+03:00 0HL7FLSQJ74D9 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:12:04.7255945+03:00 0HL7FLSQJ74D9 [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:12:04.7300973+03:00 0HL7FLSQJ74D9 [INF] Request finished in 31.7477ms 200 application/json (15c52c40)
2017-08-30T17:12:11.3109883+03:00 0HL7FLSQJ74DA [INF] Request starting HTTP/1.1 POST http://localhost:5000/connect/introspect application/x-www-form-urlencoded 145 (e5be5b71)
2017-08-30T17:12:11.3154919+03:00 0HL7FLSQJ74DA [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:12:11.3154919+03:00 0HL7FLSQJ74DA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.IntrospectionEndpoint" for "/connect/introspect" (f7642de5)
2017-08-30T17:12:11.3345034+03:00 0HL7FLSQJ74DA [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:12:11.3345034+03:00 0HL7FLSQJ74DA [INF] Success token introspection. Token status: "active", for API name: "fso.Api" (c4bc8338)
2017-08-30T17:12:11.3355044+03:00 0HL7FLSQJ74DA [INF] Request finished in 25.7536ms 200 application/json (15c52c40)
2017-08-30T17:17:00.1465287+03:00 0HL7FLSQJ74DB [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.70274176916785411504102620110&state=15041026201100.7756807793863358   (e5be5b71)
2017-08-30T17:17:00.1495307+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:00.1505310+03:00 0HL7FLSQJ74DB [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:17:00.1510307+03:00 0HL7FLSQJ74DB [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:00.1510307+03:00 0HL7FLSQJ74DB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:17:00.1515316+03:00 0HL7FLSQJ74DB [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:00.1525327+03:00 0HL7FLSQJ74DB [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:00.1525327+03:00 0HL7FLSQJ74DB [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041026201100.7756807793863358\",
  \"Nonce\": \"N0.70274176916785411504102620110\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.70274176916785411504102620110\",
    \"state\": \"15041026201100.7756807793863358\"
  }
}" (9a175e33)
2017-08-30T17:17:00.1605384+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:17:00.1775489+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:00.1815516+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:17:00.1855543+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:17:00.1890564+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:17:00.1910589+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:00.1945606+03:00 0HL7FLSQJ74DB [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:17:00.2140734+03:00 0HL7FLSQJ74DB [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041026201100.7756807793863358\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:17:00.2145747+03:00 0HL7FLSQJ74DB [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:00.2155746+03:00 0HL7FLSQJ74DB [INF] Request finished in 69.3285ms 302  (15c52c40)
2017-08-30T17:17:03.5863062+03:00 0HL7FLSQJ74DC [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.28025380877705011504102623472&state=15041026234720.6706636449089636   (e5be5b71)
2017-08-30T17:17:03.5893074+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:03.5898076+03:00 0HL7FLSQJ74DC [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:17:03.5903077+03:00 0HL7FLSQJ74DC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:03.5903077+03:00 0HL7FLSQJ74DC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:17:03.5908086+03:00 0HL7FLSQJ74DC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:03.5918089+03:00 0HL7FLSQJ74DC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:03.5918089+03:00 0HL7FLSQJ74DC [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041026234720.6706636449089636\",
  \"Nonce\": \"N0.28025380877705011504102623472\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.28025380877705011504102623472\",
    \"state\": \"15041026234720.6706636449089636\"
  }
}" (9a175e33)
2017-08-30T17:17:03.5958120+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:17:03.6078196+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:03.6098213+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:17:03.6118222+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:17:03.6143245+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:17:03.6163254+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:03.6183267+03:00 0HL7FLSQJ74DC [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:17:03.6388402+03:00 0HL7FLSQJ74DC [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041026234720.6706636449089636\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:17:03.6393407+03:00 0HL7FLSQJ74DC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:03.6408455+03:00 0HL7FLSQJ74DC [INF] Request finished in 54.5135ms 302  (15c52c40)
2017-08-30T17:17:09.7879274+03:00 0HL7FLSQJ74DD [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:17:09.7909294+03:00 0HL7FLSQJ74DD [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:09.7914300+03:00 0HL7FLSQJ74DD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:17:09.7924306+03:00 0HL7FLSQJ74DD [INF] Request finished in 4.1013ms 200 application/json (15c52c40)
2017-08-30T17:17:10.4243505+03:00 0HL7FLSQJ74DE [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.155475711262931031504102630122&state=15041026301220.7644406898827674   (e5be5b71)
2017-08-30T17:17:10.4273525+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:10.4278526+03:00 0HL7FLSQJ74DE [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:17:10.4283531+03:00 0HL7FLSQJ74DE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:10.4288537+03:00 0HL7FLSQJ74DE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:17:10.4293538+03:00 0HL7FLSQJ74DE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:10.4298543+03:00 0HL7FLSQJ74DE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:10.4298543+03:00 0HL7FLSQJ74DE [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041026301220.7644406898827674\",
  \"Nonce\": \"N0.155475711262931031504102630122\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.155475711262931031504102630122\",
    \"state\": \"15041026301220.7644406898827674\"
  }
}" (9a175e33)
2017-08-30T17:17:10.4343567+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:17:10.4468652+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:10.4488666+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:17:10.4508679+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:17:10.4523691+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:17:10.4548710+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:10.4568723+03:00 0HL7FLSQJ74DE [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:17:10.4788873+03:00 0HL7FLSQJ74DE [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041026301220.7644406898827674\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:17:10.4793878+03:00 0HL7FLSQJ74DE [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:17:10.4853918+03:00 0HL7FLSQJ74DE [INF] Request finished in 56.4963ms 302  (15c52c40)
2017-08-30T17:17:15.4117172+03:00 0HL7FLSQJ74DF [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:17:15.4142195+03:00 0HL7FLSQJ74DF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:15.4142195+03:00 0HL7FLSQJ74DF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:17:15.4152197+03:00 0HL7FLSQJ74DF [INF] Request finished in 3.7618ms 200 application/json (15c52c40)
2017-08-30T17:17:15.5352996+03:00 0HL7FLSQJ74DG [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/connect/userinfo   (e5be5b71)
2017-08-30T17:17:15.5357997+03:00 0HL7FLSQJ74DG [INF] Request finished in 0.7942ms 204  (15c52c40)
2017-08-30T17:17:15.6298622+03:00 0HL7FLSQJ74DH [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/userinfo application/json  (e5be5b71)
2017-08-30T17:17:15.6328642+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:17:15.6328642+03:00 0HL7FLSQJ74DH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-08-30T17:17:15.6328642+03:00 0HL7FLSQJ74DH [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-08-30T17:17:15.6558791+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:17:15.6593820+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:15.6613826+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:17:15.6648851+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:17:15.6673866+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:17:15.6693879+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:17:15.6713892+03:00 0HL7FLSQJ74DH [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:17:15.6713892+03:00 0HL7FLSQJ74DH [INF] Profile service returned to the following claim types: "sub name preferred_username given_name role role email" (a9217bec)
2017-08-30T17:17:15.6723903+03:00 0HL7FLSQJ74DH [INF] Request finished in 42.3603ms 200 application/json (15c52c40)
2017-08-30T17:22:10.1507690+03:00 0HL7FLSQJ74DI [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.70721428792668271504102930117&state=15041029301170.3991176568784778   (e5be5b71)
2017-08-30T17:22:10.1537714+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:10.1537714+03:00 0HL7FLSQJ74DI [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:10.1547717+03:00 0HL7FLSQJ74DI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:10.1547717+03:00 0HL7FLSQJ74DI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:10.1547717+03:00 0HL7FLSQJ74DI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:10.1557723+03:00 0HL7FLSQJ74DI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:10.1557723+03:00 0HL7FLSQJ74DI [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029301170.3991176568784778\",
  \"Nonce\": \"N0.70721428792668271504102930117\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.70721428792668271504102930117\",
    \"state\": \"15041029301170.3991176568784778\"
  }
}" (9a175e33)
2017-08-30T17:22:10.1637777+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:10.1747854+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:10.1777882+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:10.1827923+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:10.1877940+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:10.1907960+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:10.2028036+03:00 0HL7FLSQJ74DI [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:10.2228209+03:00 0HL7FLSQJ74DI [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029301170.3991176568784778\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:10.2238219+03:00 0HL7FLSQJ74DI [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:10.2253231+03:00 0HL7FLSQJ74DI [INF] Request finished in 74.2489ms 302  (15c52c40)
2017-08-30T17:22:11.9155452+03:00 0HL7FLSQJ74DJ [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.48403598181317541504102931206&state=15041029312060.3894541624225627   (e5be5b71)
2017-08-30T17:22:11.9195475+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:11.9205477+03:00 0HL7FLSQJ74DJ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:11.9220493+03:00 0HL7FLSQJ74DJ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:11.9220493+03:00 0HL7FLSQJ74DJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:11.9305548+03:00 0HL7FLSQJ74DJ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:11.9315558+03:00 0HL7FLSQJ74DJ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:11.9325569+03:00 0HL7FLSQJ74DJ [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029312060.3894541624225627\",
  \"Nonce\": \"N0.48403598181317541504102931206\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.48403598181317541504102931206\",
    \"state\": \"15041029312060.3894541624225627\"
  }
}" (9a175e33)
2017-08-30T17:22:11.9500680+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:11.9815895+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:11.9890935+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:12.0036037+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:12.0101087+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:12.0221158+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:12.0676463+03:00 0HL7FLSQJ74DJ [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:12.0901611+03:00 0HL7FLSQJ74DJ [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029312060.3894541624225627\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:12.0956641+03:00 0HL7FLSQJ74DJ [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:12.0986661+03:00 0HL7FLSQJ74DJ [INF] Request finished in 184.0304ms 302  (15c52c40)
2017-08-30T17:22:13.4335937+03:00 0HL7FLSQJ74DK [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.434645917378345461504102933353&state=15041029333530.5350155266296217   (e5be5b71)
2017-08-30T17:22:13.4375967+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:13.4395985+03:00 0HL7FLSQJ74DK [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:13.4471029+03:00 0HL7FLSQJ74DK [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:13.4476038+03:00 0HL7FLSQJ74DK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:13.4526059+03:00 0HL7FLSQJ74DK [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:13.4541075+03:00 0HL7FLSQJ74DK [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:13.4546081+03:00 0HL7FLSQJ74DK [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029333530.5350155266296217\",
  \"Nonce\": \"N0.434645917378345461504102933353\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.434645917378345461504102933353\",
    \"state\": \"15041029333530.5350155266296217\"
  }
}" (9a175e33)
2017-08-30T17:22:13.4836269+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (13ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:13.5016393+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:13.5041412+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:13.5186506+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:13.5216522+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:13.5336602+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:13.5436696+03:00 0HL7FLSQJ74DK [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:13.5656819+03:00 0HL7FLSQJ74DK [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029333530.5350155266296217\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:13.5681837+03:00 0HL7FLSQJ74DK [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:13.5731867+03:00 0HL7FLSQJ74DK [INF] Request finished in 136.3229ms 302  (15c52c40)
2017-08-30T17:22:15.2302877+03:00 0HL7FLSQJ74DL [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.7443786089880991504102935139&state=15041029351390.9310877206709682   (e5be5b71)
2017-08-30T17:22:15.2387936+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:15.2397947+03:00 0HL7FLSQJ74DL [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:15.2402944+03:00 0HL7FLSQJ74DL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:15.2407945+03:00 0HL7FLSQJ74DL [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:15.2412951+03:00 0HL7FLSQJ74DL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:15.2427959+03:00 0HL7FLSQJ74DL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:15.2427959+03:00 0HL7FLSQJ74DL [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029351390.9310877206709682\",
  \"Nonce\": \"N0.7443786089880991504102935139\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.7443786089880991504102935139\",
    \"state\": \"15041029351390.9310877206709682\"
  }
}" (9a175e33)
2017-08-30T17:22:15.2738169+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (10ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:15.2888269+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:15.3148441+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:15.3353580+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (7ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:15.3388605+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:15.3443636+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:15.3558714+03:00 0HL7FLSQJ74DL [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:15.3758847+03:00 0HL7FLSQJ74DL [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029351390.9310877206709682\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:15.3908947+03:00 0HL7FLSQJ74DL [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:15.3938971+03:00 0HL7FLSQJ74DL [INF] Request finished in 183.7059ms 302  (15c52c40)
2017-08-30T17:22:17.4504814+03:00 0HL7FLSQJ74DM [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.48766525521567531504102937112&state=15041029371120.8020619344845894   (e5be5b71)
2017-08-30T17:22:17.4529825+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:17.4534830+03:00 0HL7FLSQJ74DM [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:17.4544829+03:00 0HL7FLSQJ74DM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:17.4544829+03:00 0HL7FLSQJ74DM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:17.4549831+03:00 0HL7FLSQJ74DM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:17.4554840+03:00 0HL7FLSQJ74DM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:17.4559841+03:00 0HL7FLSQJ74DM [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029371120.8020619344845894\",
  \"Nonce\": \"N0.48766525521567531504102937112\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.48766525521567531504102937112\",
    \"state\": \"15041029371120.8020619344845894\"
  }
}" (9a175e33)
2017-08-30T17:22:17.4684922+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:17.4845029+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:17.4950105+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:17.4970118+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:17.4995129+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:17.5020151+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:17.5045162+03:00 0HL7FLSQJ74DM [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:17.5250304+03:00 0HL7FLSQJ74DM [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029371120.8020619344845894\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:17.5260303+03:00 0HL7FLSQJ74DM [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:17.5280320+03:00 0HL7FLSQJ74DM [INF] Request finished in 76.9477ms 302  (15c52c40)
2017-08-30T17:22:18.5368193+03:00 0HL7FLSQJ74DN [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.063242836719752841504102938172&state=15041029381720.11127831313637793   (e5be5b71)
2017-08-30T17:22:18.5398217+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:18.5403218+03:00 0HL7FLSQJ74DN [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:18.5408224+03:00 0HL7FLSQJ74DN [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:18.5408224+03:00 0HL7FLSQJ74DN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:18.5558319+03:00 0HL7FLSQJ74DN [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:18.5568330+03:00 0HL7FLSQJ74DN [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:18.5573331+03:00 0HL7FLSQJ74DN [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029381720.11127831313637793\",
  \"Nonce\": \"N0.063242836719752841504102938172\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.063242836719752841504102938172\",
    \"state\": \"15041029381720.11127831313637793\"
  }
}" (9a175e33)
2017-08-30T17:22:18.5643382+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:18.5848516+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:18.5988609+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:18.6013628+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:18.6038639+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:18.6063657+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:18.6143711+03:00 0HL7FLSQJ74DN [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:18.6328832+03:00 0HL7FLSQJ74DN [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029381720.11127831313637793\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:18.6438909+03:00 0HL7FLSQJ74DN [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:18.6453921+03:00 0HL7FLSQJ74DN [INF] Request finished in 108.1882ms 302  (15c52c40)
2017-08-30T17:22:20.3741727+03:00 0HL7FLSQJ74DO [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.45090737584873741504102940168&state=15041029401680.4524833179232317   (e5be5b71)
2017-08-30T17:22:20.3896825+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:20.3906831+03:00 0HL7FLSQJ74DO [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:20.3941888+03:00 0HL7FLSQJ74DO [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:20.3946878+03:00 0HL7FLSQJ74DO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:20.3961882+03:00 0HL7FLSQJ74DO [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:20.4006906+03:00 0HL7FLSQJ74DO [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:20.4011899+03:00 0HL7FLSQJ74DO [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029401680.4524833179232317\",
  \"Nonce\": \"N0.45090737584873741504102940168\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.45090737584873741504102940168\",
    \"state\": \"15041029401680.4524833179232317\"
  }
}" (9a175e33)
2017-08-30T17:22:20.4512236+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (18ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:20.5012568+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:20.5047589+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:20.5152661+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:20.5182685+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:20.5207700+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:20.5237716+03:00 0HL7FLSQJ74DO [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:20.5437853+03:00 0HL7FLSQJ74DO [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029401680.4524833179232317\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:20.5442870+03:00 0HL7FLSQJ74DO [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:20.5457866+03:00 0HL7FLSQJ74DO [INF] Request finished in 172.5407ms 302  (15c52c40)
2017-08-30T17:22:22.4501053+03:00 0HL7FLSQJ74DP [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.400080630210920331504102942356&state=15041029423560.09525861553956516   (e5be5b71)
2017-08-30T17:22:22.4526115+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:22.4536121+03:00 0HL7FLSQJ74DP [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:22:22.4541127+03:00 0HL7FLSQJ74DP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:22.4541127+03:00 0HL7FLSQJ74DP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:22:22.4546128+03:00 0HL7FLSQJ74DP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:22.4551133+03:00 0HL7FLSQJ74DP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:22.4556135+03:00 0HL7FLSQJ74DP [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041029423560.09525861553956516\",
  \"Nonce\": \"N0.400080630210920331504102942356\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.400080630210920331504102942356\",
    \"state\": \"15041029423560.09525861553956516\"
  }
}" (9a175e33)
2017-08-30T17:22:22.4591168+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:22:22.4701332+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:22.4721345+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:22:22.4741362+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:22:22.4771378+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:22:22.4791392+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:22:22.4811409+03:00 0HL7FLSQJ74DP [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:22:22.4981518+03:00 0HL7FLSQJ74DP [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041029423560.09525861553956516\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:22:22.4991525+03:00 0HL7FLSQJ74DP [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:22:22.5001531+03:00 0HL7FLSQJ74DP [INF] Request finished in 50.3723ms 302  (15c52c40)
2017-08-30T17:22:26.9930681+03:00 0HL7FLSQJ74DQ [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:22:26.9970700+03:00 0HL7FLSQJ74DQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:22:26.9970700+03:00 0HL7FLSQJ74DQ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:22:26.9990713+03:00 0HL7FLSQJ74DQ [INF] Request finished in 4.53ms 200 application/json (15c52c40)
2017-08-30T17:27:25.1393101+03:00 0HL7FLSQJ74DR [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.95336702524488341504103245110&state=15041032451100.06491253644709682   (e5be5b71)
2017-08-30T17:27:25.7353978+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:27:25.7358984+03:00 0HL7FLSQJ74DR [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:27:25.7363985+03:00 0HL7FLSQJ74DR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:25.7363985+03:00 0HL7FLSQJ74DR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:27:25.7368994+03:00 0HL7FLSQJ74DR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:25.7373992+03:00 0HL7FLSQJ74DR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:25.7373992+03:00 0HL7FLSQJ74DR [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041032451100.06491253644709682\",
  \"Nonce\": \"N0.95336702524488341504103245110\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.95336702524488341504103245110\",
    \"state\": \"15041032451100.06491253644709682\"
  }
}" (9a175e33)
2017-08-30T17:27:25.7918488+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (52ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:27:25.8098615+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:25.8133637+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:27:25.8178669+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:27:25.8218703+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:27:25.8238705+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:25.8308751+03:00 0HL7FLSQJ74DR [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:27:25.8513890+03:00 0HL7FLSQJ74DR [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041032451100.06491253644709682\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:27:25.8523900+03:00 0HL7FLSQJ74DR [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:25.8528905+03:00 0HL7FLSQJ74DR [INF] Request finished in 714.7764ms 302  (15c52c40)
2017-08-30T17:27:28.2545619+03:00 0HL7FLSQJ74DS [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.66684682041665751504103248145&state=15041032481450.8558174092003099   (e5be5b71)
2017-08-30T17:27:28.2580632+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:27:28.2620659+03:00 0HL7FLSQJ74DS [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:27:28.2630677+03:00 0HL7FLSQJ74DS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:28.2630677+03:00 0HL7FLSQJ74DS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:27:28.2635675+03:00 0HL7FLSQJ74DS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:28.2655692+03:00 0HL7FLSQJ74DS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:28.2655692+03:00 0HL7FLSQJ74DS [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041032481450.8558174092003099\",
  \"Nonce\": \"N0.66684682041665751504103248145\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.66684682041665751504103248145\",
    \"state\": \"15041032481450.8558174092003099\"
  }
}" (9a175e33)
2017-08-30T17:27:28.2860826+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:27:28.3060959+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:28.3166027+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:27:28.3241075+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:27:28.3281157+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:27:28.3316127+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:28.3351152+03:00 0HL7FLSQJ74DS [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:27:28.3701385+03:00 0HL7FLSQJ74DS [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041032481450.8558174092003099\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:27:28.3711392+03:00 0HL7FLSQJ74DS [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:28.3726400+03:00 0HL7FLSQJ74DS [INF] Request finished in 118.6579ms 302  (15c52c40)
2017-08-30T17:27:32.6119572+03:00 0HL7FLSQJ74DT [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.181713582717949681504103252454&state=15041032524550.9039399108345707   (e5be5b71)
2017-08-30T17:27:32.6144591+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:27:32.6149600+03:00 0HL7FLSQJ74DT [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:27:32.6154605+03:00 0HL7FLSQJ74DT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:32.6159599+03:00 0HL7FLSQJ74DT [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:27:32.6159599+03:00 0HL7FLSQJ74DT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:32.6164604+03:00 0HL7FLSQJ74DT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:32.6169609+03:00 0HL7FLSQJ74DT [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041032524550.9039399108345707\",
  \"Nonce\": \"N0.181713582717949681504103252454\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.181713582717949681504103252454\",
    \"state\": \"15041032524550.9039399108345707\"
  }
}" (9a175e33)
2017-08-30T17:27:32.6199629+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:27:32.6394757+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:32.6414762+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:27:32.6454805+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:27:32.6479808+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:27:32.6504838+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:27:32.6524844+03:00 0HL7FLSQJ74DT [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:27:32.6734983+03:00 0HL7FLSQJ74DT [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041032524550.9039399108345707\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:27:32.6744990+03:00 0HL7FLSQJ74DT [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:27:32.6749999+03:00 0HL7FLSQJ74DT [INF] Request finished in 63.5736ms 302  (15c52c40)
2017-08-30T17:27:39.7577192+03:00 0HL7FLSQJ74DU [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:27:39.7607240+03:00 0HL7FLSQJ74DU [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:27:39.7612213+03:00 0HL7FLSQJ74DU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:27:39.7622224+03:00 0HL7FLSQJ74DU [INF] Request finished in 4.4017ms 200 application/json (15c52c40)
2017-08-30T17:32:32.1363326+03:00 0HL7FLSQJ74DV [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.062023027534521491504103552111&state=15041035521110.38962632133627784   (e5be5b71)
2017-08-30T17:32:32.1398359+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:32:32.1543442+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:32:32.1601658+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:32.1631717+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:32:32.1666723+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:32:32.1691741+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:32:32.1736769+03:00 0HL7FLSQJ74DV [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:32:32.1741775+03:00 0HL7FLSQJ74DV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:32.1741775+03:00 0HL7FLSQJ74DV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:32:32.1746788+03:00 0HL7FLSQJ74DV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:32.1756795+03:00 0HL7FLSQJ74DV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:32.1756795+03:00 0HL7FLSQJ74DV [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041035521110.38962632133627784\",
  \"Nonce\": \"N0.062023027534521491504103552111\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.062023027534521491504103552111\",
    \"state\": \"15041035521110.38962632133627784\"
  }
}" (9a175e33)
2017-08-30T17:32:32.1836836+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:32.1851848+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:32:32.1871873+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:32:32.1886869+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:32:32.1901881+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:32.1926900+03:00 0HL7FLSQJ74DV [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:32:32.2056998+03:00 0HL7FLSQJ74DV [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041035521110.38962632133627784\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:32:32.2067013+03:00 0HL7FLSQJ74DV [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:32.2107023+03:00 0HL7FLSQJ74DV [INF] Request finished in 75.9605ms 302  (15c52c40)
2017-08-30T17:32:36.2945699+03:00 0HL7FLSQJ74E0 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.72074638666228271504103556120&state=15041035561200.35190427663608137   (e5be5b71)
2017-08-30T17:32:36.2980721+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:32:36.3015746+03:00 0HL7FLSQJ74E0 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:32:36.3060797+03:00 0HL7FLSQJ74E0 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:36.3065803+03:00 0HL7FLSQJ74E0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:32:36.3070784+03:00 0HL7FLSQJ74E0 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:36.3080791+03:00 0HL7FLSQJ74E0 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:36.3080791+03:00 0HL7FLSQJ74E0 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041035561200.35190427663608137\",
  \"Nonce\": \"N0.72074638666228271504103556120\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.72074638666228271504103556120\",
    \"state\": \"15041035561200.35190427663608137\"
  }
}" (9a175e33)
2017-08-30T17:32:36.3175852+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (5ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:32:36.3315945+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:36.3406009+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:32:36.3441042+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:32:36.3566116+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:32:36.3626155+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:36.3741222+03:00 0HL7FLSQJ74E0 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:32:36.4056441+03:00 0HL7FLSQJ74E0 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041035561200.35190427663608137\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:32:36.4401665+03:00 0HL7FLSQJ74E0 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:36.4917013+03:00 0HL7FLSQJ74E0 [INF] Request finished in 147.8651ms 302  (15c52c40)
2017-08-30T17:32:39.8084050+03:00 0HL7FLSQJ74E1 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.6914651338815881504103559522&state=15041035595220.5122281715978099   (e5be5b71)
2017-08-30T17:32:39.8124096+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:32:39.8134091+03:00 0HL7FLSQJ74E1 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:32:39.8139096+03:00 0HL7FLSQJ74E1 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:39.8139096+03:00 0HL7FLSQJ74E1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:32:39.8144093+03:00 0HL7FLSQJ74E1 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:39.8149095+03:00 0HL7FLSQJ74E1 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:39.8154096+03:00 0HL7FLSQJ74E1 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041035595220.5122281715978099\",
  \"Nonce\": \"N0.6914651338815881504103559522\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.6914651338815881504103559522\",
    \"state\": \"15041035595220.5122281715978099\"
  }
}" (9a175e33)
2017-08-30T17:32:39.8179111+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:32:39.8309205+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:39.8334220+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:32:39.8359231+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:32:39.8379248+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:32:39.8399261+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:39.8414269+03:00 0HL7FLSQJ74E1 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:32:39.8619407+03:00 0HL7FLSQJ74E1 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041035595220.5122281715978099\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:32:39.8629414+03:00 0HL7FLSQJ74E1 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:39.8634427+03:00 0HL7FLSQJ74E1 [INF] Request finished in 55.4167ms 302  (15c52c40)
2017-08-30T17:32:43.6414526+03:00 0HL7FLSQJ74E2 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.93373011200943591504103563283&state=15041035632830.39499401992592476   (e5be5b71)
2017-08-30T17:32:43.6454556+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:32:43.6464563+03:00 0HL7FLSQJ74E2 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:32:43.6469568+03:00 0HL7FLSQJ74E2 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:43.6469568+03:00 0HL7FLSQJ74E2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:32:43.6474577+03:00 0HL7FLSQJ74E2 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:43.6479575+03:00 0HL7FLSQJ74E2 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:43.6479575+03:00 0HL7FLSQJ74E2 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041035632830.39499401992592476\",
  \"Nonce\": \"N0.93373011200943591504103563283\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.93373011200943591504103563283\",
    \"state\": \"15041035632830.39499401992592476\"
  }
}" (9a175e33)
2017-08-30T17:32:43.6529608+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:32:43.6699725+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:43.6729749+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:32:43.6839822+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:32:43.6859828+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:32:43.6899858+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:32:43.6919871+03:00 0HL7FLSQJ74E2 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:32:43.7160027+03:00 0HL7FLSQJ74E2 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041035632830.39499401992592476\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:32:43.7165032+03:00 0HL7FLSQJ74E2 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:32:43.7190051+03:00 0HL7FLSQJ74E2 [INF] Request finished in 79.8538ms 302  (15c52c40)
2017-08-30T17:32:50.6332767+03:00 0HL7FLSQJ74E3 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:32:50.6387802+03:00 0HL7FLSQJ74E3 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:32:50.6392815+03:00 0HL7FLSQJ74E3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:32:50.6452863+03:00 0HL7FLSQJ74E3 [INF] Request finished in 7.8703ms 200 application/json (15c52c40)
2017-08-30T17:37:43.1367609+03:00 0HL7FLSQJ74E4 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.99703793576685441504103863111&state=15041038631110.2803876772867038   (e5be5b71)
2017-08-30T17:37:43.4219414+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:37:43.4227103+03:00 0HL7FLSQJ74E4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:37:43.4227103+03:00 0HL7FLSQJ74E4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:43.4232120+03:00 0HL7FLSQJ74E4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:37:43.4232120+03:00 0HL7FLSQJ74E4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:43.4237122+03:00 0HL7FLSQJ74E4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:43.4242131+03:00 0HL7FLSQJ74E4 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041038631110.2803876772867038\",
  \"Nonce\": \"N0.99703793576685441504103863111\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.99703793576685441504103863111\",
    \"state\": \"15041038631110.2803876772867038\"
  }
}" (9a175e33)
2017-08-30T17:37:43.4562348+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (29ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:37:43.4692442+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:37:43.4727444+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:37:43.4762473+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:37:43.4827629+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:37:43.4852537+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:37:43.4887558+03:00 0HL7FLSQJ74E4 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:37:43.5017652+03:00 0HL7FLSQJ74E4 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041038631110.2803876772867038\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:37:43.5022642+03:00 0HL7FLSQJ74E4 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:43.5027651+03:00 0HL7FLSQJ74E4 [INF] Request finished in 366.4818ms 302  (15c52c40)
2017-08-30T17:37:47.5491549+03:00 0HL7FLSQJ74E5 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.2732021810862991504103867130&state=15041038671300.693910530525008   (e5be5b71)
2017-08-30T17:37:47.5526571+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:37:47.5531572+03:00 0HL7FLSQJ74E5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:37:47.5536573+03:00 0HL7FLSQJ74E5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:47.5536573+03:00 0HL7FLSQJ74E5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:37:47.5541579+03:00 0HL7FLSQJ74E5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:47.5546580+03:00 0HL7FLSQJ74E5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:47.5546580+03:00 0HL7FLSQJ74E5 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041038671300.693910530525008\",
  \"Nonce\": \"N0.2732021810862991504103867130\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.2732021810862991504103867130\",
    \"state\": \"15041038671300.693910530525008\"
  }
}" (9a175e33)
2017-08-30T17:37:47.5581605+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:37:47.5711692+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:37:47.5726704+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:37:47.5751718+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:37:47.5771732+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:37:47.5796754+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:37:47.5826774+03:00 0HL7FLSQJ74E5 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:37:47.6016904+03:00 0HL7FLSQJ74E5 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041038671300.693910530525008\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:37:47.6026907+03:00 0HL7FLSQJ74E5 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:37:47.6036914+03:00 0HL7FLSQJ74E5 [INF] Request finished in 54.9718ms 302  (15c52c40)
2017-08-30T17:37:52.9702581+03:00 0HL7FLSQJ74E6 [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:37:52.9722598+03:00 0HL7FLSQJ74E6 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:37:52.9722598+03:00 0HL7FLSQJ74E6 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:37:52.9732605+03:00 0HL7FLSQJ74E6 [INF] Request finished in 3.1279ms 200 application/json (15c52c40)
2017-08-30T17:42:48.1375168+03:00 0HL7FLSQJ74E7 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.43262160823859011504104168111&state=15041041681110.9735875452913223   (e5be5b71)
2017-08-30T17:42:48.1405176+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:42:48.1415183+03:00 0HL7FLSQJ74E7 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:42:48.1415183+03:00 0HL7FLSQJ74E7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:48.1420184+03:00 0HL7FLSQJ74E7 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:42:48.1425193+03:00 0HL7FLSQJ74E7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:48.1430207+03:00 0HL7FLSQJ74E7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:48.1430207+03:00 0HL7FLSQJ74E7 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041041681110.9735875452913223\",
  \"Nonce\": \"N0.43262160823859011504104168111\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.43262160823859011504104168111\",
    \"state\": \"15041041681110.9735875452913223\"
  }
}" (9a175e33)
2017-08-30T17:42:48.4535458+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (307ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:42:48.5479447+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (84ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:48.5509470+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:42:48.5544476+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:42:48.5579489+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:42:48.7729625+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (212ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:48.7754643+03:00 0HL7FLSQJ74E7 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:42:48.7909748+03:00 0HL7FLSQJ74E7 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041041681110.9735875452913223\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:42:48.7919751+03:00 0HL7FLSQJ74E7 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:48.7924760+03:00 0HL7FLSQJ74E7 [INF] Request finished in 655.5031ms 302  (15c52c40)
2017-08-30T17:42:51.5128586+03:00 0HL7FLSQJ74E8 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.93624873616202821504104171181&state=15041041711810.638506819902966   (e5be5b71)
2017-08-30T17:42:51.5163588+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:42:51.5268656+03:00 0HL7FLSQJ74E8 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:42:51.5398742+03:00 0HL7FLSQJ74E8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:51.5398742+03:00 0HL7FLSQJ74E8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:42:51.5473794+03:00 0HL7FLSQJ74E8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:51.5483800+03:00 0HL7FLSQJ74E8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:51.5488806+03:00 0HL7FLSQJ74E8 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041041711810.638506819902966\",
  \"Nonce\": \"N0.93624873616202821504104171181\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.93624873616202821504104171181\",
    \"state\": \"15041041711810.638506819902966\"
  }
}" (9a175e33)
2017-08-30T17:42:51.9061168+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (354ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:42:52.1933089+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (271ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:52.3764299+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (179ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:42:52.4039483+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (25ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:42:52.4084511+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:42:52.4389712+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:52.4494788+03:00 0HL7FLSQJ74E8 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:42:52.4704924+03:00 0HL7FLSQJ74E8 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041041711810.638506819902966\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:42:52.4789982+03:00 0HL7FLSQJ74E8 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:52.4814997+03:00 0HL7FLSQJ74E8 [INF] Request finished in 968.7954ms 302  (15c52c40)
2017-08-30T17:42:55.5660498+03:00 0HL7FLSQJ74E9 [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.54033516835074981504104175358&state=15041041753580.35021920204403933   (e5be5b71)
2017-08-30T17:42:55.5690518+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:42:55.5695527+03:00 0HL7FLSQJ74E9 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:42:55.5700528+03:00 0HL7FLSQJ74E9 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:55.5700528+03:00 0HL7FLSQJ74E9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:42:55.5705526+03:00 0HL7FLSQJ74E9 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:55.5710535+03:00 0HL7FLSQJ74E9 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:55.5710535+03:00 0HL7FLSQJ74E9 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041041753580.35021920204403933\",
  \"Nonce\": \"N0.54033516835074981504104175358\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.54033516835074981504104175358\",
    \"state\": \"15041041753580.35021920204403933\"
  }
}" (9a175e33)
2017-08-30T17:42:55.7540205+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (179ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:42:56.0120599+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (246ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:56.0165626+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:42:56.2156942+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (197ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:42:56.2201982+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:42:56.2497168+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:56.2532198+03:00 0HL7FLSQJ74E9 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:42:56.2722324+03:00 0HL7FLSQJ74E9 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041041753580.35021920204403933\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:42:56.2727325+03:00 0HL7FLSQJ74E9 [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:56.2732335+03:00 0HL7FLSQJ74E9 [INF] Request finished in 707.9036ms 302  (15c52c40)
2017-08-30T17:42:58.9435074+03:00 0HL7FLSQJ74EA [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.81076753216651441504104178731&state=15041041787310.7970824588499945   (e5be5b71)
2017-08-30T17:42:58.9490112+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:42:58.9495114+03:00 0HL7FLSQJ74EA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:42:58.9500119+03:00 0HL7FLSQJ74EA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:58.9500119+03:00 0HL7FLSQJ74EA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:42:58.9505124+03:00 0HL7FLSQJ74EA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:58.9510130+03:00 0HL7FLSQJ74EA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:58.9515127+03:00 0HL7FLSQJ74EA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041041787310.7970824588499945\",
  \"Nonce\": \"N0.81076753216651441504104178731\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.81076753216651441504104178731\",
    \"state\": \"15041041787310.7970824588499945\"
  }
}" (9a175e33)
2017-08-30T17:42:58.9690249+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (14ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:42:58.9870365+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:58.9920402+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:42:58.9970436+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:42:59.0015464+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:42:59.0060495+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:42:59.0105519+03:00 0HL7FLSQJ74EA [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:42:59.0340682+03:00 0HL7FLSQJ74EA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041041787310.7970824588499945\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:42:59.0345679+03:00 0HL7FLSQJ74EA [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:42:59.0360695+03:00 0HL7FLSQJ74EA [INF] Request finished in 92.1725ms 302  (15c52c40)
2017-08-30T17:43:05.8685025+03:00 0HL7FLSQJ74EB [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:43:05.8710051+03:00 0HL7FLSQJ74EB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:43:05.8710051+03:00 0HL7FLSQJ74EB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:43:05.8725063+03:00 0HL7FLSQJ74EB [INF] Request finished in 3.9016ms 200 application/json (15c52c40)
2017-08-30T17:48:01.1424238+03:00 0HL7FLSQJ74EC [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.78784117564223391504104481111&state=15041044811110.7476991694884743   (e5be5b71)
2017-08-30T17:48:01.5408543+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:48:01.5418550+03:00 0HL7FLSQJ74EC [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:48:01.5418550+03:00 0HL7FLSQJ74EC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:01.5423563+03:00 0HL7FLSQJ74EC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:48:01.5423563+03:00 0HL7FLSQJ74EC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:01.5428553+03:00 0HL7FLSQJ74EC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:01.5433554+03:00 0HL7FLSQJ74EC [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041044811110.7476991694884743\",
  \"Nonce\": \"N0.78784117564223391504104481111\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.78784117564223391504104481111\",
    \"state\": \"15041044811110.7476991694884743\"
  }
}" (9a175e33)
2017-08-30T17:48:01.5758788+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (29ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:48:01.5883861+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:48:01.5918890+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:48:01.5963922+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (2ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:48:01.6013948+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:48:01.6038958+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:48:01.6094005+03:00 0HL7FLSQJ74EC [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:48:01.6244247+03:00 0HL7FLSQJ74EC [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041044811110.7476991694884743\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:48:01.6249248+03:00 0HL7FLSQJ74EC [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:01.6259259+03:00 0HL7FLSQJ74EC [INF] Request finished in 483.7917ms 302  (15c52c40)
2017-08-30T17:48:05.1618501+03:00 0HL7FLSQJ74ED [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.122339767252694461504104485110&state=15041044851100.879576863912241   (e5be5b71)
2017-08-30T17:48:05.1653527+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:48:05.1658532+03:00 0HL7FLSQJ74ED [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:48:05.1663533+03:00 0HL7FLSQJ74ED [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:05.1663533+03:00 0HL7FLSQJ74ED [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:48:05.1668539+03:00 0HL7FLSQJ74ED [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:05.1678541+03:00 0HL7FLSQJ74ED [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:05.1678541+03:00 0HL7FLSQJ74ED [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041044851100.879576863912241\",
  \"Nonce\": \"N0.122339767252694461504104485110\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.122339767252694461504104485110\",
    \"state\": \"15041044851100.879576863912241\"
  }
}" (9a175e33)
2017-08-30T17:48:05.1718568+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:48:05.1883680+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:48:05.1908698+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:48:05.1928712+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:48:05.1993757+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:48:05.2023777+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:48:05.2048791+03:00 0HL7FLSQJ74ED [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:48:05.2288963+03:00 0HL7FLSQJ74ED [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041044851100.879576863912241\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:48:05.2328978+03:00 0HL7FLSQJ74ED [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:48:05.2379015+03:00 0HL7FLSQJ74ED [INF] Request finished in 72.5306ms 302  (15c52c40)
2017-08-30T17:48:10.2367236+03:00 0HL7FLSQJ74EE [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:48:10.2392254+03:00 0HL7FLSQJ74EE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:48:10.2392254+03:00 0HL7FLSQJ74EE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:48:10.2402261+03:00 0HL7FLSQJ74EE [INF] Request finished in 3.8526ms 200 application/json (15c52c40)
2017-08-30T17:53:05.1531994+03:00 0HL7FLSQJ74EF [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.0352064630229111941504104785111&state=15041047851110.8072458846082324   (e5be5b71)
2017-08-30T17:53:05.5592295+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:53:05.5597272+03:00 0HL7FLSQJ74EF [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:53:05.5602270+03:00 0HL7FLSQJ74EF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:05.5602270+03:00 0HL7FLSQJ74EF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:53:05.5607287+03:00 0HL7FLSQJ74EF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:05.5612280+03:00 0HL7FLSQJ74EF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:05.5617282+03:00 0HL7FLSQJ74EF [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041047851110.8072458846082324\",
  \"Nonce\": \"N0.0352064630229111941504104785111\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.0352064630229111941504104785111\",
    \"state\": \"15041047851110.8072458846082324\"
  }
}" (9a175e33)
2017-08-30T17:53:05.5931273+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (28ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:53:05.6056363+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:05.6086371+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:53:05.6116395+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (1ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:53:05.6161430+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:53:05.6186433+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:05.6226487+03:00 0HL7FLSQJ74EF [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:53:05.6376587+03:00 0HL7FLSQJ74EF [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041047851110.8072458846082324\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:53:05.6386598+03:00 0HL7FLSQJ74EF [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:05.6391579+03:00 0HL7FLSQJ74EF [INF] Request finished in 487.2485ms 302  (15c52c40)
2017-08-30T17:53:08.1924267+03:00 0HL7FLSQJ74EG [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.50989218547317861504104788150&state=15041047881500.8961620088704856   (e5be5b71)
2017-08-30T17:53:08.1954287+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:53:08.1969315+03:00 0HL7FLSQJ74EG [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:53:08.1974328+03:00 0HL7FLSQJ74EG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:08.1974328+03:00 0HL7FLSQJ74EG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:53:08.1984307+03:00 0HL7FLSQJ74EG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:08.1994317+03:00 0HL7FLSQJ74EG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:08.1994317+03:00 0HL7FLSQJ74EG [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041047881500.8961620088704856\",
  \"Nonce\": \"N0.50989218547317861504104788150\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.50989218547317861504104788150\",
    \"state\": \"15041047881500.8961620088704856\"
  }
}" (9a175e33)
2017-08-30T17:53:08.2034340+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:53:08.2174433+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:08.2209466+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:53:08.2229476+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:53:08.2254486+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:53:08.2369577+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:08.2394583+03:00 0HL7FLSQJ74EG [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:53:08.2639776+03:00 0HL7FLSQJ74EG [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041047881500.8961620088704856\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:53:08.2664763+03:00 0HL7FLSQJ74EG [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:08.2674770+03:00 0HL7FLSQJ74EG [INF] Request finished in 75.0131ms 302  (15c52c40)
2017-08-30T17:53:11.5656685+03:00 0HL7FLSQJ74EH [INF] Request starting HTTP/1.1 GET http://localhost:5000/connect/authorize?response_type=id_token%20token&client_id=fso.AngularClient&redirect_uri=http://localhost:65271&scope=openid%20email%20profile%20fso.Api&nonce=N0.26163826631507251504104791452&state=15041047914520.1449815885616368   (e5be5b71)
2017-08-30T17:53:11.5686712+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:53:11.5696719+03:00 0HL7FLSQJ74EH [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "Identity.Application". (bdba1d38)
2017-08-30T17:53:11.5701724+03:00 0HL7FLSQJ74EH [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:11.5701724+03:00 0HL7FLSQJ74EH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-08-30T17:53:11.5706726+03:00 0HL7FLSQJ74EH [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:11.5711731+03:00 0HL7FLSQJ74EH [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:11.5716732+03:00 0HL7FLSQJ74EH [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"fso.AngularClient\",
  \"ClientName\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"AllowedRedirectUris\": [
    \"http://localhost:65271\",
    \"http://localhost:65271/auth/firstlogin\"
  ],
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid email profile fso.Api\",
  \"State\": \"15041047914520.1449815885616368\",
  \"Nonce\": \"N0.26163826631507251504104791452\",
  \"SessionId\": \"dbf6779737690d9cfda066657cf49bff\",
  \"Raw\": {
    \"response_type\": \"id_token token\",
    \"client_id\": \"fso.AngularClient\",
    \"redirect_uri\": \"http://localhost:65271\",
    \"scope\": \"openid email profile fso.Api\",
    \"nonce\": \"N0.26163826631507251504104791452\",
    \"state\": \"15041047914520.1449815885616368\"
  }
}" (9a175e33)
2017-08-30T17:53:11.5756755+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__get_Item_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[Active], [e].[BirthDate], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[Locale], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[Name], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[PictureUrl], [e].[ProfilePageUrl], [e].[RegisterTime], [e].[SecurityStamp], [e].[Status], [e].[Surname], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0 (6438bdd5)
2017-08-30T17:53:11.5881832+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:11.5901850+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0 (6438bdd5)
2017-08-30T17:53:11.5926864+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [rc].[ClaimType], [rc].[ClaimValue]
FROM [AspNetRoleClaims] AS [rc]
WHERE [rc].[RoleId] = @__role_Id_0 (6438bdd5)
2017-08-30T17:53:11.5946878+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0 (6438bdd5)
2017-08-30T17:53:11.5991909+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='Text', CommandTimeout='30']
SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0 (6438bdd5)
2017-08-30T17:53:11.6016924+03:00 0HL7FLSQJ74EH [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [AspNetRoles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0 (6438bdd5)
2017-08-30T17:53:11.6232081+03:00 0HL7FLSQJ74EH [INF] Authorize endpoint response
"{
  \"SubjectId\": \"3c7cca64-00cd-49cc-9407-3128eae83098\",
  \"ClientId\": \"fso.AngularClient\",
  \"RedirectUri\": \"http://localhost:65271\",
  \"State\": \"15041047914520.1449815885616368\",
  \"Scope\": \"openid email profile fso.Api\"
}" (5993a9fa)
2017-08-30T17:53:11.6237074+03:00 0HL7FLSQJ74EH [INF] AuthenticationScheme: "Identity.Application" was successfully authenticated. (1805f3b3)
2017-08-30T17:53:11.6247077+03:00 0HL7FLSQJ74EH [INF] Request finished in 59.7316ms 302  (15c52c40)
2017-08-30T17:53:16.5520018+03:00 0HL7FLSQJ74EI [INF] Request starting HTTP/1.1 GET http://localhost:5000/.well-known/openid-configuration/jwks   (e5be5b71)
2017-08-30T17:53:16.5575049+03:00 0HL7FLSQJ74EI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'__EFMigrationsHistory'); (6438bdd5)
2017-08-30T17:53:16.5575049+03:00 0HL7FLSQJ74EI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration/jwks" (f7642de5)
2017-08-30T17:53:16.5600067+03:00 0HL7FLSQJ74EI [INF] Request finished in 7.4637ms 200 application/json (15c52c40)
